(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9838:function(e,r,i){Promise.resolve().then(i.bind(i,7510))},7510:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return c}});var t=i(6705),n=i(955),d=i(5496),o=i(7076),a=i(4033),l=i(8647);function s(e){let{userRole:r,userPermissions:i}=e,[d,o]=(0,n.useState)([]),[a,s]=(0,n.useState)(""),[c,p]=(0,n.useState)(!1),[u,x]=(0,n.useState)(null),[h]=(0,n.useState)(()=>Math.random().toString(36).substr(2,9)),f=(0,n.useRef)(null),b=async()=>{let e=a.trim();if(!e)return;let t={from:"user",text:e};o(e=>[...e,t]),s(""),p(!0);try{let t=e.toLowerCase(),n=t.includes("factură")||t.includes("facturi")||t.includes("plată")||t.includes("plăți")||t.includes("bancă")||t.includes("tranzacție")||t.includes("suma")||t.includes("valoare")||t.includes("buget")||t.includes("cost")||t.includes("financiar")||t.includes("bani");if(n&&"normal"===r){let e={from:"bot",text:"\uD83D\uDEAB Nu ai permisiunea să accesezi informații financiare. Contactează un administrator pentru detalii."};o(r=>[...r,e]),p(!1);return}let d=t.includes("proiect")||t.includes("proiecte")||t.includes("timp")||t.includes("lucrat")||t.includes("ore")||t.includes("activitate")||t.includes("raport")||t.includes("progres")||t.includes("deadline")||t.includes("termen");if(d){let t=await fetch("/api/user-database",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,sessionId:h,userRole:r,userPermissions:i})}),n=await t.json(),d={from:"bot",text:n.reply||"Fără răspuns."};o(e=>[...e,d])}else{let r=await fetch("/api/queryOpenAI",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}),i=await r.json(),t={from:"bot",text:i.reply||"Fără răspuns."};o(e=>[...e,t])}}catch(e){console.error("Eroare chatbot:",e),o(e=>[...e,{from:"bot",text:"Eroare la conectare cu serverul."}])}p(!1)},g=(0,n.useCallback)(e=>{let r=e[0];r&&(x(r),o(e=>[...e,{from:"user",text:"Am \xeencărcat fișierul: ".concat(r.name)}]))},[]),{getRootProps:m,getInputProps:j,isDragActive:y}=(0,l.uI)({onDrop:g});return(0,n.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[d]),(0,t.jsxs)("div",{style:{position:"fixed",bottom:"10px",right:"10px",width:"340px",background:"#fefefe",border:"1px solid #ccc",borderRadius:"8px",zIndex:9999,boxShadow:"0 0 10px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[(0,t.jsxs)("div",{style:{background:"admin"===r?"#4caf50":"#2196f3",color:"white",padding:"10px",textAlign:"center",fontWeight:"bold",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},children:["Asistent AI - ","admin"===r?"Admin":"Utilizator"]}),(0,t.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"10px",paddingBottom:"0"},children:[d.map((e,r)=>(0,t.jsx)("div",{style:{textAlign:"user"===e.from?"right":"left",margin:"5px 0"},children:(0,t.jsx)("span",{style:{display:"inline-block",padding:"6px 10px",borderRadius:"12px",background:"user"===e.from?"#dcf8c6":"#e0e0e0",maxWidth:"90%",wordWrap:"break-word"},children:e.text})},r)),(0,t.jsx)("div",{ref:f})]}),(0,t.jsxs)("div",{style:{padding:"10px",borderTop:"1px solid #ccc"},children:[(0,t.jsx)("textarea",{rows:3,value:a,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&(e.preventDefault(),b())},placeholder:"\xcentreabă despre proiecte, timp lucrat, rapoarte...",style:{width:"100%",resize:"none",padding:"8px",borderRadius:"6px",border:"1px solid #ccc",fontSize:"14px"}}),(0,t.jsx)("button",{onClick:b,disabled:c,style:{marginTop:"8px",width:"100%",padding:"8px",background:"admin"===r?"#4caf50":"#2196f3",color:"white",border:"none",borderRadius:"6px",cursor:c?"not-allowed":"pointer"},children:c?"Se generează...":"Trimite"})]})]})}function c(){let[e,r]=(0,d.F_)(o.I),[i,l]=(0,n.useState)(null),[c,p]=(0,n.useState)(null),[u,x]=(0,n.useState)(!0),h=(0,a.useRouter)();(0,n.useEffect)(()=>{if(!r){if(!e){h.push("/login");return}f()}},[e,r,h]);let f=async()=>{if(e)try{let r=await fetch("/api/user-role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:e.uid,email:e.email})}),i=await r.json();i.success&&(l(i.role),p(i.permissions),x(!1))}catch(e){console.error("Eroare la verificarea rolului:",e),x(!1)}};return r||u?(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,t.jsx)("div",{children:"Se \xeencarcă..."})}):e?(0,t.jsxs)("div",{style:{padding:"20px"},children:[(0,t.jsxs)("header",{style:{background:"admin"===i?"#f39c12":"#4caf50",color:"white",padding:"20px",borderRadius:"8px",marginBottom:"20px"},children:[(0,t.jsxs)("h1",{children:["Unitar Proiect - Dashboard ","admin"===i?"Administrator":"Utilizator"]}),(0,t.jsxs)("p",{children:["Bun venit, ",e.displayName||e.email,"!"]}),(0,t.jsxs)("p",{children:["Rol: ",i||"Se \xeencarcă..."]}),(0,t.jsxs)("div",{style:{marginTop:"10px"},children:[(0,t.jsx)("button",{onClick:()=>o.I.signOut(),style:{background:"#f44336",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginRight:"10px"},children:"Logout"}),"admin"===i&&(0,t.jsx)("button",{onClick:()=>h.push("/admin"),style:{background:"#f39c12",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Mergi la Admin Dashboard"})]})]}),"normal"===i&&(0,t.jsxs)("div",{style:{background:"#fff3cd",color:"#856404",padding:"1rem",borderRadius:"8px",border:"1px solid #ffeaa7",marginBottom:"20px"},children:[(0,t.jsx)("h3",{children:"\uD83D\uDD12 Acces Utilizator Normal"}),(0,t.jsx)("p",{children:"Ai acces la:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"Proiectele tale"}),(0,t.jsx)("li",{children:"\xcenregistrarea timpului lucrat"}),(0,t.jsx)("li",{children:"Rapoarte de proiecte"}),(0,t.jsx)("li",{children:"❌ Fără acces la informații financiare"})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,t.jsxs)("div",{style:{background:"#f9f9f9",padding:"20px",borderRadius:"8px",border:"1px solid #ddd"},children:[(0,t.jsx)("h2",{children:"Proiectele mele"}),(0,t.jsx)("p",{children:"Aici vei vedea proiectele la care lucrezi."}),(0,t.jsx)("button",{onClick:()=>alert("Funcționalitate \xeen dezvoltare"),style:{background:"#4caf50",color:"white",padding:"10px 20px",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Vezi proiectele"})]}),(0,t.jsxs)("div",{style:{background:"#f9f9f9",padding:"20px",borderRadius:"8px",border:"1px solid #ddd"},children:[(0,t.jsx)("h2",{children:"Timpul lucrat"}),(0,t.jsx)("p",{children:"\xcenregistrează timpul petrecut pe proiecte."}),(0,t.jsx)("button",{onClick:()=>alert("Funcționalitate \xeen dezvoltare"),style:{background:"#2196f3",color:"white",padding:"10px 20px",border:"none",borderRadius:"6px",cursor:"pointer"},children:"\xcenregistrează timp"})]}),(0,t.jsxs)("div",{style:{background:"#f9f9f9",padding:"20px",borderRadius:"8px",border:"1px solid #ddd"},children:[(0,t.jsx)("h2",{children:"Rapoarte"}),(0,t.jsx)("p",{children:"Generează rapoarte pentru proiectele tale."}),(0,t.jsx)("button",{onClick:()=>alert("Funcționalitate \xeen dezvoltare"),style:{background:"#ff9800",color:"white",padding:"10px 20px",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Generează rapoarte"})]}),(0,t.jsxs)("div",{style:{background:"#f9f9f9",padding:"20px",borderRadius:"8px",border:"1px solid #ddd"},children:[(0,t.jsx)("h2",{children:"Profilul meu"}),(0,t.jsx)("p",{children:"Actualizează informațiile tale."}),(0,t.jsx)("button",{onClick:()=>alert("Funcționalitate \xeen dezvoltare"),style:{background:"#9c27b0",color:"white",padding:"10px 20px",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Editează profilul"})]})]}),(0,t.jsx)(s,{userRole:i,userPermissions:c})]}):(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,t.jsx)("div",{children:"Redirecting to login..."})})}},7076:function(e,r,i){"use strict";i.d(r,{I:function(){return a}});var t=i(994),n=i(3085),d=i(4086);let o=(0,t.C6)().length?(0,t.Mq)():(0,t.ZF)({apiKey:"AIzaSyBcvmm7kHWmQdDX-mMcSnYd05FCIEXMTxc",authDomain:"unitarproiect.firebaseapp.com",projectId:"unitarproiect",storageBucket:"unitarproiect.appspot.com",messagingSenderId:"1015955629687",appId:"1:1015955629687:web:947103af6bc62be5b48872"}),a=(0,n.v0)(o);(0,d.ad)(o)}},function(e){e.O(0,[358,637,663,647,411,121,114,744],function(){return e(e.s=9838)}),_N_E=e.O()}]);