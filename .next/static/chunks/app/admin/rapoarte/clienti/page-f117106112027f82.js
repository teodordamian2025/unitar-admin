(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{3389:function(e,r,n){Promise.resolve().then(n.bind(n,14))},14:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return l}});var t=n(6705),i=n(955),o=n(8259),c=n(3811);function l(){let[e,r]=(0,i.useState)([]),[n,l]=(0,i.useState)(!0),[d,a]=(0,i.useState)(!1),[s,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{u()},[]);let u=async()=>{try{l(!0);let e=await fetch("/api/rapoarte/clienti"),n=await e.json();n.success?r(n.data||[]):(o.Am.error("Eroare la \xeencărcarea clienților"),r([]))}catch(e){console.error("Eroare la \xeencărcarea clienților:",e),o.Am.error("Eroare de conectare"),r([])}finally{l(!1)}},x=async()=>{try{f(!0),o.Am.info("Se sincronizează clienții din factureaza.me...");let e=await fetch("/api/actions/clients/sync-factureaza",{method:"GET"}),r=await e.json();r.success?(o.Am.success("Sincronizare completă: ".concat(r.syncedCount," clienți adăugați")),r.errorCount>0&&o.Am.warning("".concat(r.errorCount," erori \xeen timpul sincronizării")),u()):o.Am.error("Eroare la sincronizare: ".concat(r.error))}catch(e){o.Am.error("Eroare la sincronizarea cu factureaza.me")}finally{f(!1)}},h=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString("ro-RO")}catch(e){return""}},p=e=>"persoana_juridica"===e?"\uD83C\uDFE2":"\uD83D\uDC64",m=e=>e?"✅":"⚠️";return n?(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px",fontSize:"16px",color:"#7f8c8d"},children:"⏳ Se \xeencarcă clienții..."}):(0,t.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,t.jsxs)("div",{style:{marginBottom:"2rem",borderBottom:"2px solid #e9ecef",paddingBottom:"1rem"},children:[(0,t.jsx)("h1",{style:{margin:0,color:"#2c3e50",fontSize:"2rem",fontWeight:"bold"},children:"\uD83D\uDC65 Management Clienți"}),(0,t.jsx)("p",{style:{margin:"0.5rem 0 0 0",color:"#7f8c8d",fontSize:"1.1rem"},children:"Gestionează clienții și sincronizează cu factureaza.me"})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",padding:"1rem",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{style:{margin:0,color:"#2c3e50"},children:["\uD83D\uDC65 Clienți găsiți: ",e.length]}),(0,t.jsxs)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"14px",color:"#7f8c8d"},children:[e.filter(e=>e.sincronizat_factureaza).length," sincronizați cu factureaza.me"]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,t.jsx)("button",{onClick:()=>a(!0),style:{padding:"0.5rem 1rem",background:"#27ae60",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"+ Client Nou"}),(0,t.jsx)("button",{onClick:x,disabled:s,style:{padding:"0.5rem 1rem",background:s?"#bdc3c7":"#3498db",color:"white",border:"none",borderRadius:"6px",cursor:s?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:s?"⏳ Sincronizare...":"\uD83D\uDD04 Sync factureaza.me"}),(0,t.jsx)("button",{onClick:u,style:{padding:"0.5rem 1rem",background:"#f39c12",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"\uD83D\uDD04 Re\xeemprospătează"})]})]}),0===e.length?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"3rem",background:"#f8f9fa",borderRadius:"8px",border:"2px dashed #dee2e6"},children:[(0,t.jsx)("p",{style:{fontSize:"18px",color:"#7f8c8d",margin:0},children:"\uD83D\uDC65 Nu au fost găsiți clienți"}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#bdc3c7",margin:"0.5rem 0"},children:"Adaugă primul client sau sincronizează din factureaza.me"}),(0,t.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,t.jsx)("button",{onClick:()=>a(!0),style:{padding:"0.75rem 1.5rem",background:"#27ae60",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",marginRight:"1rem"},children:"+ Adaugă Client"}),(0,t.jsx)("button",{onClick:x,disabled:s,style:{padding:"0.75rem 1.5rem",background:s?"#bdc3c7":"#3498db",color:"white",border:"none",borderRadius:"6px",cursor:s?"not-allowed":"pointer",fontSize:"16px",fontWeight:"bold"},children:s?"⏳ Sincronizare...":"Sincronizează din factureaza.me"})]})]}):(0,t.jsx)("div",{style:{background:"white",borderRadius:"8px",border:"1px solid #dee2e6",overflow:"hidden",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f8f9fa",borderBottom:"2px solid #dee2e6"},children:[(0,t.jsx)("th",{style:{padding:"1rem 0.75rem",textAlign:"left",fontWeight:"bold",color:"#2c3e50"},children:"Tip"}),(0,t.jsx)("th",{style:{padding:"1rem 0.75rem",textAlign:"left",fontWeight:"bold",color:"#2c3e50"},children:"Nume"}),(0,t.jsx)("th",{style:{padding:"1rem 0.75rem",textAlign:"left",fontWeight:"bold",color:"#2c3e50"},children:"CUI/CNP"}),(0,t.jsx)("th",{style:{padding:"1rem 0.75rem",textAlign:"left",fontWeight:"bold",color:"#2c3e50"},children:"Contact"}),(0,t.jsx)("th",{style:{padding:"1rem 0.75rem",textAlign:"left",fontWeight:"bold",color:"#2c3e50"},children:"Localitate"}),(0,t.jsx)("th",{style:{padding:"1rem 0.75rem",textAlign:"center",fontWeight:"bold",color:"#2c3e50"},children:"factureaza.me"}),(0,t.jsx)("th",{style:{padding:"1rem 0.75rem",textAlign:"center",fontWeight:"bold",color:"#2c3e50"},children:"Data Creare"})]})}),(0,t.jsx)("tbody",{children:e.map((e,r)=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f1f2f6",background:r%2==0?"white":"#fafbfc"},children:[(0,t.jsx)("td",{style:{padding:"0.75rem",textAlign:"center"},children:(0,t.jsx)("span",{style:{fontSize:"18px"},children:p(e.tip_client)})}),(0,t.jsx)("td",{style:{padding:"0.75rem",color:"#2c3e50",fontWeight:"bold"},children:e.nume}),(0,t.jsx)("td",{style:{padding:"0.75rem",color:"#7f8c8d",fontFamily:"monospace"},children:e.cui||e.cnp||"-"}),(0,t.jsxs)("td",{style:{padding:"0.75rem",color:"#2c3e50"},children:[(0,t.jsx)("div",{children:e.email||"-"}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#7f8c8d"},children:e.telefon||"-"})]}),(0,t.jsxs)("td",{style:{padding:"0.75rem",color:"#2c3e50"},children:[(0,t.jsx)("div",{children:e.oras||"-"}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#7f8c8d"},children:e.judet||"-"})]}),(0,t.jsx)("td",{style:{padding:"0.75rem",textAlign:"center"},children:(0,t.jsxs)("span",{style:{fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[m(e.sincronizat_factureaza),(0,t.jsx)("span",{style:{fontSize:"12px",color:e.sincronizat_factureaza?"#27ae60":"#f39c12"},children:e.sincronizat_factureaza?"Sync":"Local"})]})}),(0,t.jsx)("td",{style:{padding:"0.75rem",textAlign:"center",color:"#7f8c8d",fontSize:"12px",fontFamily:"monospace"},children:h(e.data_creare)})]},e.id))})]})}),(0,t.jsx)(c.Z,{isOpen:d,onClose:()=>a(!1),onClientAdded:u})]})}}},function(e){e.O(0,[259,811,121,114,744],function(){return e(e.s=3389)}),_N_E=e.O()}]);