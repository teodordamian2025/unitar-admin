(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{2601:function(e,r,t){"use strict";var i,o;e.exports=(null==(i=t.g.process)?void 0:i.env)&&"object"==typeof(null==(o=t.g.process)?void 0:o.env)?t.g.process:t(8960)},3811:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var i=t(6705),o=t(955),a=t(8259),n=t(2601);function l(e){let{isOpen:r,onClose:t,onClientAdded:l}=e,[d,s]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!1),p=async()=>{if(!m.cui.trim()){a.Am.error("Introduceți mai \xeent\xe2i CUI-ul");return}try{u(!0),a.Am.info("Verificare date ANAF...");let e=await fetch("/api/verify-anaf?cui=".concat(m.cui)),r=await e.json();r.success&&r.data?(x(e=>({...e,nume:r.data.nume||e.nume,adresa:r.data.adresa||e.adresa})),a.Am.success("Date ANAF \xeencărcate cu succes!")):a.Am.warning("Nu s-au găsit date pentru acest CUI la ANAF")}catch(e){console.error("Eroare verificare ANAF:",e),a.Am.error("Eroare la verificarea ANAF")}finally{u(!1)}},[m,x]=(0,o.useState)({nume:"",tip_client:"persoana_juridica",cui:"",nr_reg_com:"",adresa:"",judet:"",oras:"",cod_postal:"",telefon:"",email:"",banca:"",iban:"",cnp:"",ci_serie:"",ci_numar:"",ci_eliberata_de:"",ci_eliberata_la:"",observatii:""}),b=async e=>{e.preventDefault(),s(!0);try{if(!m.nume.trim()){a.Am.error("Numele clientului este obligatoriu"),s(!1);return}if("persoana_juridica"===m.tip_client&&!m.cui.trim()){a.Am.error("CUI-ul este obligatoriu pentru persoane juridice"),s(!1);return}if("persoana_fizica"===m.tip_client&&!m.cnp.trim()){a.Am.error("CNP-ul este obligatoriu pentru persoane fizice"),s(!1);return}console.log("Trimitere date client:",m),a.Am.info("Se adaugă clientul...");let e=n.env.FACTUREAZA_API_KEY?"/api/actions/clients/sync-factureaza":"/api/rapoarte/clienti",r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});console.log("Response status:",r.status);let i=await r.json();console.log("Response data:",i),i.success||r.ok?(e.includes("sync-factureaza")?a.Am.success("Client adăugat cu succes \xeen BigQuery și factureaza.me!"):a.Am.success("Client adăugat cu succes \xeen BigQuery!"),l(),t(),x({nume:"",tip_client:"persoana_juridica",cui:"",nr_reg_com:"",adresa:"",judet:"",oras:"",cod_postal:"",telefon:"",email:"",banca:"",iban:"",cnp:"",ci_serie:"",ci_numar:"",ci_eliberata_de:"",ci_eliberata_la:"",observatii:""})):(console.error("Eroare API:",i),a.Am.error("Eroare: ".concat(i.error||"Eroare necunoscută")))}catch(e){console.error("Eroare la adăugarea clientului:",e),a.Am.error("Eroare la adăugarea clientului")}finally{s(!1)}},g=(e,r)=>{x(t=>({...t,[e]:r}))};return r?(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:(0,i.jsxs)("div",{style:{background:"white",borderRadius:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto"},children:[(0,i.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"1px solid #dee2e6",background:"#f8f9fa",borderRadius:"8px 8px 0 0"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("h2",{style:{margin:0,color:"#2c3e50"},children:"\uD83D\uDC64 Adaugă Client Nou"}),(0,i.jsx)("button",{onClick:t,disabled:d,style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#6c757d"},children:"\xd7"})]}),(0,i.jsx)("p",{style:{margin:"0.5rem 0 0 0",color:"#7f8c8d",fontSize:"14px"},children:"Clientul va fi adăugat automat \xeen BigQuery și sincronizat cu factureaza.me"})]}),(0,i.jsxs)("form",{onSubmit:b,style:{padding:"1.5rem"},children:[(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Tip client *"}),(0,i.jsxs)("select",{value:m.tip_client,onChange:e=>g("tip_client",e.target.value),disabled:d,style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"},children:[(0,i.jsx)("option",{value:"persoana_juridica",children:"Persoană Juridică"}),(0,i.jsx)("option",{value:"persoana_fizica",children:"Persoană Fizică"})]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Nume *"}),(0,i.jsx)("input",{type:"text",value:m.nume,onChange:e=>g("nume",e.target.value),disabled:d,placeholder:"Numele clientului",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),"persoana_juridica"===m.tip_client?(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"CUI *"}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,i.jsx)("input",{type:"text",value:m.cui,onChange:e=>g("cui",e.target.value),disabled:d,placeholder:"RO12345678",style:{flex:1,padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}}),(0,i.jsx)("button",{type:"button",onClick:p,disabled:d||c||!m.cui.trim(),style:{padding:"0.75rem 1rem",background:c?"#bdc3c7":"#e74c3c",color:"white",border:"none",borderRadius:"6px",cursor:d||c||!m.cui.trim()?"not-allowed":"pointer",fontSize:"12px",fontWeight:"bold",whiteSpace:"nowrap"},children:c?"⏳":"\uD83C\uDFDB️ ANAF"})]})]}):(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"CNP *"}),(0,i.jsx)("input",{type:"text",value:m.cnp,onChange:e=>g("cnp",e.target.value),disabled:d,placeholder:"1234567890123",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]})]}),"persoana_juridica"===m.tip_client&&(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Nr. Reg. Com."}),(0,i.jsx)("input",{type:"text",value:m.nr_reg_com,onChange:e=>g("nr_reg_com",e.target.value),disabled:d,placeholder:"J40/1234/2020",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Adresă"}),(0,i.jsx)("input",{type:"text",value:m.adresa,onChange:e=>g("adresa",e.target.value),disabled:d,placeholder:"Strada, numărul, sectorul/comuna",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Județ"}),(0,i.jsx)("input",{type:"text",value:m.judet,onChange:e=>g("judet",e.target.value),disabled:d,placeholder:"București",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Oraș"}),(0,i.jsx)("input",{type:"text",value:m.oras,onChange:e=>g("oras",e.target.value),disabled:d,placeholder:"București",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Cod Poștal"}),(0,i.jsx)("input",{type:"text",value:m.cod_postal,onChange:e=>g("cod_postal",e.target.value),disabled:d,placeholder:"010123",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Telefon"}),(0,i.jsx)("input",{type:"tel",value:m.telefon,onChange:e=>g("telefon",e.target.value),disabled:d,placeholder:"0123456789",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Email"}),(0,i.jsx)("input",{type:"email",value:m.email,onChange:e=>g("email",e.target.value),disabled:d,placeholder:"contact@client.ro",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Bancă"}),(0,i.jsx)("input",{type:"text",value:m.banca,onChange:e=>g("banca",e.target.value),disabled:d,placeholder:"Banca Transilvania",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"IBAN"}),(0,i.jsx)("input",{type:"text",value:m.iban,onChange:e=>g("iban",e.target.value),disabled:d,placeholder:"RO49AAAA1B31007593840000",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Observații"}),(0,i.jsx)("textarea",{value:m.observatii,onChange:e=>g("observatii",e.target.value),disabled:d,placeholder:"Observații despre client...",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px",resize:"vertical"}})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",paddingTop:"1rem",borderTop:"1px solid #dee2e6"},children:[(0,i.jsx)("button",{type:"button",onClick:t,disabled:d,style:{padding:"0.75rem 1.5rem",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:"Anulează"}),(0,i.jsx)("button",{type:"submit",disabled:d,style:{padding:"0.75rem 1.5rem",background:d?"#bdc3c7":"#27ae60",color:"white",border:"none",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:d?"⏳ Se adaugă...":"\uD83D\uDCBE Adaugă Client"})]})]})]})}):null}},8960:function(e){!function(){var r={229:function(e){var r,t,i,o=e.exports={};function a(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{t="function"==typeof clearTimeout?clearTimeout:n}catch(e){t=n}}();var d=[],s=!1,c=-1;function u(){s&&i&&(s=!1,i.length?d=i.concat(d):c=-1,d.length&&p())}function p(){if(!s){var e=l(u);s=!0;for(var r=d.length;r;){for(i=d,d=[];++c<r;)i&&i[c].run();c=-1,r=d.length}i=null,s=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===n||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function x(){}o.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];d.push(new m(e,r)),1!==d.length||s||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=x,o.addListener=x,o.once=x,o.off=x,o.removeListener=x,o.removeAllListeners=x,o.emit=x,o.prependListener=x,o.prependOnceListener=x,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},t={};function i(e){var o=t[e];if(void 0!==o)return o.exports;var a=t[e]={exports:{}},n=!0;try{r[e](a,a.exports,i),n=!1}finally{n&&delete t[e]}return a.exports}i.ab="//";var o=i(229);e.exports=o}()},9991:function(e,r,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=t(955),o=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function s(e,r,t){var i,a={},s=null,c=null;for(i in void 0!==t&&(s=""+t),void 0!==r.key&&(s=""+r.key),void 0!==r.ref&&(c=r.ref),r)n.call(r,i)&&!d.hasOwnProperty(i)&&(a[i]=r[i]);if(e&&e.defaultProps)for(i in r=e.defaultProps)void 0===a[i]&&(a[i]=r[i]);return{$$typeof:o,type:e,key:s,ref:c,props:a,_owner:l.current}}r.Fragment=a,r.jsx=s,r.jsxs=s},6705:function(e,r,t){"use strict";e.exports=t(9991)}}]);