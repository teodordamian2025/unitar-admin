"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{3811:function(e,i,r){r.d(i,{Z:function(){return o}});var t=r(6705),a=r(955),l=r(8259);function o(e){let{isOpen:i,onClose:r,onClientAdded:o}=e,[d,n]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),p=async()=>{if(!u.cui.trim()){l.Am.error("Introduceți mai \xeent\xe2i CUI-ul");return}try{c(!0),l.Am.info("Verificare date ANAF...");let e=await fetch("/api/verify-anaf?cui=".concat(u.cui)),i=await e.json();i.success&&i.data?(m(e=>({...e,nume:i.data.nume||e.nume,adresa:i.data.adresa||e.adresa})),l.Am.success("Date ANAF \xeencărcate cu succes!")):l.Am.warning("Nu s-au găsit date pentru acest CUI la ANAF")}catch(e){console.error("Eroare verificare ANAF:",e),l.Am.error("Eroare la verificarea ANAF")}finally{c(!1)}},[u,m]=(0,a.useState)({nume:"",tip_client:"persoana_juridica",cui:"",nr_reg_com:"",adresa:"",judet:"",oras:"",cod_postal:"",telefon:"",email:"",banca:"",iban:"",cnp:"",ci_serie:"",ci_numar:"",ci_eliberata_de:"",ci_eliberata_la:"",observatii:""}),x=async e=>{e.preventDefault(),n(!0);try{let e,i;if(!u.nume.trim()){l.Am.error("Numele clientului este obligatoriu"),n(!1);return}if("persoana_juridica"===u.tip_client&&!u.cui.trim()){l.Am.error("CUI-ul este obligatoriu pentru persoane juridice"),n(!1);return}if("persoana_fizica"===u.tip_client&&!u.cnp.trim()){l.Am.error("CNP-ul este obligatoriu pentru persoane fizice"),n(!1);return}console.log("Trimitere date client:",u),l.Am.info("Se adaugă clientul..."),e=await fetch("/api/rapoarte/clienti",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),i=await e.json(),console.log("Response status:",e.status),console.log("Response data:",i),i.success||e.ok?(l.Am.success("Client adăugat cu succes!"),o(),r(),m({nume:"",tip_client:"persoana_juridica",cui:"",nr_reg_com:"",adresa:"",judet:"",oras:"",cod_postal:"",telefon:"",email:"",banca:"",iban:"",cnp:"",ci_serie:"",ci_numar:"",ci_eliberata_de:"",ci_eliberata_la:"",observatii:""})):(console.error("Eroare API:",i),l.Am.error("Eroare: ".concat(i.error||"Eroare necunoscută")))}catch(e){console.error("Eroare la adăugarea clientului:",e),l.Am.error("Eroare la adăugarea clientului")}finally{n(!1)}},b=(e,i)=>{m(r=>({...r,[e]:i}))};return i?(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:99999,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"8px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto"},children:[(0,t.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"1px solid #dee2e6",background:"#f8f9fa",borderRadius:"8px 8px 0 0"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("h2",{style:{margin:0,color:"#2c3e50"},children:"\uD83D\uDC64 Adaugă Client Nou"}),(0,t.jsx)("button",{onClick:r,disabled:d,style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#6c757d"},children:"\xd7"})]}),(0,t.jsx)("p",{style:{margin:"0.5rem 0 0 0",color:"#7f8c8d",fontSize:"14px"},children:"Clientul va fi adăugat automat \xeen BigQuery și sincronizat cu factureaza.me"})]}),(0,t.jsxs)("form",{onSubmit:x,style:{padding:"1.5rem"},children:[(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Tip client *"}),(0,t.jsxs)("select",{value:u.tip_client,onChange:e=>b("tip_client",e.target.value),disabled:d,style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"},children:[(0,t.jsx)("option",{value:"persoana_juridica",children:"Persoană Juridică"}),(0,t.jsx)("option",{value:"persoana_fizica",children:"Persoană Fizică"})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Nume *"}),(0,t.jsx)("input",{type:"text",value:u.nume,onChange:e=>b("nume",e.target.value),disabled:d,placeholder:"Numele clientului",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),"persoana_juridica"===u.tip_client?(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"CUI *"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,t.jsx)("input",{type:"text",value:u.cui,onChange:e=>b("cui",e.target.value),disabled:d,placeholder:"RO12345678",style:{flex:1,padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}}),(0,t.jsx)("button",{type:"button",onClick:p,disabled:d||s||!u.cui.trim(),style:{padding:"0.75rem 1rem",background:s?"#bdc3c7":"#e74c3c",color:"white",border:"none",borderRadius:"6px",cursor:d||s||!u.cui.trim()?"not-allowed":"pointer",fontSize:"12px",fontWeight:"bold",whiteSpace:"nowrap"},children:s?"⏳":"\uD83C\uDFDB️ ANAF"})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"CNP *"}),(0,t.jsx)("input",{type:"text",value:u.cnp,onChange:e=>b("cnp",e.target.value),disabled:d,placeholder:"1234567890123",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]})]}),"persoana_juridica"===u.tip_client&&(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Nr. Reg. Com."}),(0,t.jsx)("input",{type:"text",value:u.nr_reg_com,onChange:e=>b("nr_reg_com",e.target.value),disabled:d,placeholder:"J40/1234/2020",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Adresă"}),(0,t.jsx)("input",{type:"text",value:u.adresa,onChange:e=>b("adresa",e.target.value),disabled:d,placeholder:"Strada, numărul, sectorul/comuna",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Județ"}),(0,t.jsx)("input",{type:"text",value:u.judet,onChange:e=>b("judet",e.target.value),disabled:d,placeholder:"București",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Oraș"}),(0,t.jsx)("input",{type:"text",value:u.oras,onChange:e=>b("oras",e.target.value),disabled:d,placeholder:"București",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Cod Poștal"}),(0,t.jsx)("input",{type:"text",value:u.cod_postal,onChange:e=>b("cod_postal",e.target.value),disabled:d,placeholder:"010123",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Telefon"}),(0,t.jsx)("input",{type:"tel",value:u.telefon,onChange:e=>b("telefon",e.target.value),disabled:d,placeholder:"0123456789",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Email"}),(0,t.jsx)("input",{type:"email",value:u.email,onChange:e=>b("email",e.target.value),disabled:d,placeholder:"contact@client.ro",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Bancă"}),(0,t.jsx)("input",{type:"text",value:u.banca,onChange:e=>b("banca",e.target.value),disabled:d,placeholder:"Banca Transilvania",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"IBAN"}),(0,t.jsx)("input",{type:"text",value:u.iban,onChange:e=>b("iban",e.target.value),disabled:d,placeholder:"RO49AAAA1B31007593840000",style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px"}})]})]}),(0,t.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#2c3e50"},children:"Observații"}),(0,t.jsx)("textarea",{value:u.observatii,onChange:e=>b("observatii",e.target.value),disabled:d,placeholder:"Observații despre client...",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #dee2e6",borderRadius:"6px",fontSize:"14px",resize:"vertical"}})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",paddingTop:"1rem",borderTop:"1px solid #dee2e6"},children:[(0,t.jsx)("button",{type:"button",onClick:r,disabled:d,style:{padding:"0.75rem 1.5rem",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:"Anulează"}),(0,t.jsx)("button",{type:"submit",disabled:d,style:{padding:"0.75rem 1.5rem",background:d?"#bdc3c7":"#27ae60",color:"white",border:"none",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:d?"⏳ Se adaugă...":"\uD83D\uDCBE Adaugă Client"})]})]})]})}):null}}}]);