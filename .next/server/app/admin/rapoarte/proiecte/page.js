(() => {
var exports = {};
exports.id = 7578;
exports.ids = [7578];
exports.modules = {

/***/ 55752:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-dom-experimental/server-rendering-stub");

/***/ }),

/***/ 17640:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-experimental");

/***/ }),

/***/ 76931:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-experimental/jsx-runtime");

/***/ }),

/***/ 64119:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-server-dom-webpack-experimental/client");

/***/ }),

/***/ 5868:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/app-render");

/***/ }),

/***/ 41844:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/get-segment-param");

/***/ }),

/***/ 96624:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/helpers/interception-routes");

/***/ }),

/***/ 75281:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/route-modules/route-module");

/***/ }),

/***/ 57085:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/app-router-context");

/***/ }),

/***/ 20199:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hash");

/***/ }),

/***/ 39569:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hooks-client-context");

/***/ }),

/***/ 17160:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router-context");

/***/ }),

/***/ 30893:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix");

/***/ }),

/***/ 12336:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/format-url");

/***/ }),

/***/ 17887:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/handle-smooth-scroll");

/***/ }),

/***/ 98735:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ 60120:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-local-url");

/***/ }),

/***/ 68231:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-path");

/***/ }),

/***/ 54614:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/path-has-prefix");

/***/ }),

/***/ 53750:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash");

/***/ }),

/***/ 70982:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/resolve-href");

/***/ }),

/***/ 79618:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/server-inserted-html");

/***/ }),

/***/ 78423:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils");

/***/ }),

/***/ 6113:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 9523:
/***/ ((module) => {

"use strict";
module.exports = require("dns");

/***/ }),

/***/ 82361:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 57147:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 13685:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 85158:
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ 41808:
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ 22037:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 71017:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 77282:
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ 12781:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 24404:
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ 57310:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 73837:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 59796:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 224:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   originalPathname: () => (/* binding */ originalPathname),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7262);
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19513);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(31823);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12502);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if(["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
// @ts-ignore this need to be imported from next/dist to be external


const AppPageRouteModule = next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule;
// We inject the tree and pages here so that we can use them in the route
// module.
const tree = {
        children: [
        '',
        {
        children: [
        'admin',
        {
        children: [
        'rapoarte',
        {
        children: [
        'proiecte',
        {
        children: ['__PAGE__', {}, {
          page: [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 84309)), "/home/teodor/PM1-2025-07-17/unitar-admin/app/admin/rapoarte/proiecte/page.tsx"],
          
        }]
      },
        {
        
        
      }
      ]
      },
        {
        'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 61705)), "/home/teodor/PM1-2025-07-17/unitar-admin/app/admin/rapoarte/layout.tsx"],
        
      }
      ]
      },
        {
        'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 85093)), "/home/teodor/PM1-2025-07-17/unitar-admin/app/admin/layout.tsx"],
        
      }
      ]
      },
        {
        'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 51921)), "/home/teodor/PM1-2025-07-17/unitar-admin/app/layout.tsx"],
'not-found': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 95493, 23)), "next/dist/client/components/not-found-error"],
        
      }
      ]
      }.children;
const pages = ["/home/teodor/PM1-2025-07-17/unitar-admin/app/admin/rapoarte/proiecte/page.tsx"];

// @ts-expect-error - replaced by webpack/turbopack loader

const __next_app_require__ = __webpack_require__
const __next_app_load_chunk__ = () => Promise.resolve()
const originalPathname = "/admin/rapoarte/proiecte/page";
const __next_app__ = {
    require: __next_app_require__,
    loadChunk: __next_app_load_chunk__
};

// Create and export the route module that will be consumed.
const routeModule = new AppPageRouteModule({
    definition: {
        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,
        page: "/admin/rapoarte/proiecte/page",
        pathname: "/admin/rapoarte/proiecte",
        // The following aren't used in production.
        bundlePath: "",
        filename: "",
        appPaths: []
    },
    userland: {
        loaderTree: tree
    }
});

//# sourceMappingURL=app-page.js.map

/***/ }),

/***/ 16902:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 34242))

/***/ }),

/***/ 34242:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ ProiectePage)
});

// EXTERNAL MODULE: external "next/dist/compiled/react-experimental/jsx-runtime"
var jsx_runtime_ = __webpack_require__(76931);
// EXTERNAL MODULE: external "next/dist/compiled/react-experimental"
var react_experimental_ = __webpack_require__(17640);
// EXTERNAL MODULE: ./node_modules/next/navigation.js
var navigation = __webpack_require__(57114);
;// CONCATENATED MODULE: ./app/admin/rapoarte/components/FilterBar.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 

function FilterBar({ filters, values, onChange, onReset, loading = false }) {
    const [isExpanded, setIsExpanded] = (0,react_experimental_.useState)(false);
    const handleFilterChange = (key, value)=>{
        onChange({
            ...values,
            [key]: value
        });
    };
    const hasActiveFilters = Object.values(values).some((value)=>value !== "" && value !== null && value !== undefined);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        style: {
            background: "white",
            borderRadius: "8px",
            padding: "1.5rem",
            marginBottom: "1.5rem",
            boxShadow: "0 2px 8px rgba(0,0,0,0.1)",
            border: "1px solid #dee2e6"
        },
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                style: {
                    display: "flex",
                    justifyContent: "space-between",
                    alignItems: "center",
                    marginBottom: isExpanded ? "1.5rem" : "0"
                },
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("h3", {
                        style: {
                            margin: 0,
                            color: "#2c3e50",
                            display: "flex",
                            alignItems: "center",
                            gap: "0.5rem"
                        },
                        children: [
                            "\uD83D\uDD0D Filtre și Căutare",
                            hasActiveFilters && /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                style: {
                                    background: "#007bff",
                                    color: "white",
                                    borderRadius: "12px",
                                    padding: "2px 8px",
                                    fontSize: "12px",
                                    fontWeight: "normal"
                                },
                                children: Object.values(values).filter((v)=>v !== "" && v !== null && v !== undefined).length
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        style: {
                            display: "flex",
                            gap: "0.5rem"
                        },
                        children: [
                            hasActiveFilters && /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                onClick: onReset,
                                disabled: loading,
                                style: {
                                    padding: "0.5rem 1rem",
                                    background: "#6c757d",
                                    color: "white",
                                    border: "none",
                                    borderRadius: "6px",
                                    cursor: loading ? "not-allowed" : "pointer",
                                    fontSize: "14px",
                                    opacity: loading ? 0.6 : 1
                                },
                                children: "\uD83D\uDD04 Reset"
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                onClick: ()=>setIsExpanded(!isExpanded),
                                style: {
                                    padding: "0.5rem 1rem",
                                    background: "transparent",
                                    color: "#007bff",
                                    border: "1px solid #007bff",
                                    borderRadius: "6px",
                                    cursor: "pointer",
                                    fontSize: "14px"
                                },
                                children: isExpanded ? "Ascunde ↑" : "Extinde ↓"
                            })
                        ]
                    })
                ]
            }),
            isExpanded && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                style: {
                    display: "grid",
                    gridTemplateColumns: "repeat(auto-fit, minmax(250px, 1fr))",
                    gap: "1rem",
                    alignItems: "end"
                },
                children: filters.map((filter)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                style: {
                                    display: "block",
                                    marginBottom: "0.5rem",
                                    color: "#495057",
                                    fontSize: "14px",
                                    fontWeight: 500
                                },
                                children: filter.label
                            }),
                            filter.type === "text" && /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                type: "text",
                                value: values[filter.key] || "",
                                onChange: (e)=>handleFilterChange(filter.key, e.target.value),
                                placeholder: filter.placeholder,
                                disabled: loading,
                                style: {
                                    width: "100%",
                                    padding: "0.75rem",
                                    border: "1px solid #ced4da",
                                    borderRadius: "6px",
                                    fontSize: "14px",
                                    opacity: loading ? 0.6 : 1
                                }
                            }),
                            filter.type === "select" && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("select", {
                                value: values[filter.key] || "",
                                onChange: (e)=>handleFilterChange(filter.key, e.target.value),
                                disabled: loading,
                                style: {
                                    width: "100%",
                                    padding: "0.75rem",
                                    border: "1px solid #ced4da",
                                    borderRadius: "6px",
                                    fontSize: "14px",
                                    background: "white",
                                    opacity: loading ? 0.6 : 1
                                },
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                        value: "",
                                        children: filter.placeholder || "Selectează..."
                                    }),
                                    filter.options?.map((option)=>/*#__PURE__*/ jsx_runtime_.jsx("option", {
                                            value: option.value,
                                            children: option.label
                                        }, option.value))
                                ]
                            }),
                            filter.type === "date" && /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                type: "date",
                                value: values[filter.key] || "",
                                onChange: (e)=>handleFilterChange(filter.key, e.target.value),
                                disabled: loading,
                                style: {
                                    width: "100%",
                                    padding: "0.75rem",
                                    border: "1px solid #ced4da",
                                    borderRadius: "6px",
                                    fontSize: "14px",
                                    opacity: loading ? 0.6 : 1
                                }
                            }),
                            filter.type === "dateRange" && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                style: {
                                    display: "flex",
                                    gap: "0.5rem"
                                },
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                        type: "date",
                                        value: values[`${filter.key}_start`] || "",
                                        onChange: (e)=>handleFilterChange(`${filter.key}_start`, e.target.value),
                                        disabled: loading,
                                        style: {
                                            flex: 1,
                                            padding: "0.75rem",
                                            border: "1px solid #ced4da",
                                            borderRadius: "6px",
                                            fontSize: "14px",
                                            opacity: loading ? 0.6 : 1
                                        }
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                        style: {
                                            alignSelf: "center",
                                            color: "#6c757d"
                                        },
                                        children: "→"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                        type: "date",
                                        value: values[`${filter.key}_end`] || "",
                                        onChange: (e)=>handleFilterChange(`${filter.key}_end`, e.target.value),
                                        disabled: loading,
                                        style: {
                                            flex: 1,
                                            padding: "0.75rem",
                                            border: "1px solid #ced4da",
                                            borderRadius: "6px",
                                            fontSize: "14px",
                                            opacity: loading ? 0.6 : 1
                                        }
                                    })
                                ]
                            })
                        ]
                    }, filter.key))
            })
        ]
    });
}

;// CONCATENATED MODULE: ./app/admin/rapoarte/proiecte/components/ProiectFilters.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 

function ProiectFilters({ values, onChange, onReset, loading = false }) {
    const filters = [
        {
            key: "search",
            label: "Căutare generală",
            type: "text",
            placeholder: "Caută după nume proiect, client, ID..."
        },
        {
            key: "status",
            label: "Status proiect",
            type: "select",
            placeholder: "Toate statusurile",
            options: [
                {
                    value: "Activ",
                    label: "\uD83D\uDFE2 Activ"
                },
                {
                    value: "\xcen lucru",
                    label: "\uD83D\uDFE1 \xcen lucru"
                },
                {
                    value: "Suspendat",
                    label: "\uD83D\uDFE0 Suspendat"
                },
                {
                    value: "Finalizat",
                    label: "✅ Finalizat"
                },
                {
                    value: "Anulat",
                    label: "\uD83D\uDD34 Anulat"
                }
            ]
        },
        {
            key: "client",
            label: "Client",
            type: "select",
            placeholder: "Toți clienții",
            options: [
                {
                    value: "SC T&D PRO ELECTRIC SRL",
                    label: "SC T&D PRO ELECTRIC SRL"
                },
                {
                    value: "SC PROD SRL",
                    label: "SC PROD SRL"
                },
                {
                    value: "SC BUILD SRL",
                    label: "SC BUILD SRL"
                }
            ]
        },
        {
            key: "data_start",
            label: "Perioada \xeenceput",
            type: "dateRange",
            placeholder: "Data \xeenceput"
        },
        {
            key: "valoare_min",
            label: "Valoare minimă (RON)",
            type: "text",
            placeholder: "0"
        },
        {
            key: "valoare_max",
            label: "Valoare maximă (RON)",
            type: "text",
            placeholder: "999999"
        }
    ];
    return /*#__PURE__*/ jsx_runtime_.jsx(FilterBar, {
        filters: filters,
        values: values,
        onChange: onChange,
        onReset: onReset,
        loading: loading
    });
}

// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/chevron-down.js
var chevron_down = __webpack_require__(19458);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/chevron-right.js
var chevron_right = __webpack_require__(11922);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/building-2.js
var building_2 = __webpack_require__(13482);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/users.js
var users = __webpack_require__(91672);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/download.js
var download = __webpack_require__(85574);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/refresh-cw.js
var refresh_cw = __webpack_require__(20644);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/search.js
var search = __webpack_require__(69518);
// EXTERNAL MODULE: ./node_modules/react-hot-toast/dist/index.mjs + 1 modules
var dist = __webpack_require__(10345);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/ellipsis-vertical.js
var ellipsis_vertical = __webpack_require__(33581);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/file-text.js
var file_text = __webpack_require__(39546);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/eye.js
var eye = __webpack_require__(28626);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/pen.js
var pen = __webpack_require__(90391);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/plus.js
var plus = __webpack_require__(22385);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/trash-2.js
var trash_2 = __webpack_require__(26303);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/x.js
var x = __webpack_require__(56206);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/calculator.js
var calculator = __webpack_require__(77974);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/map-pin.js
var map_pin = __webpack_require__(87094);
;// CONCATENATED MODULE: ./app/admin/rapoarte/proiecte/components/FacturaHibridModal.tsx
// app/admin/rapoarte/proiecte/components/FacturaHibridModal.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 










function FacturaHibridModal({ proiect, onClose, onSuccess }) {
    const [loading, setLoading] = (0,react_experimental_.useState)(false);
    const [loadingANAF, setLoadingANAF] = (0,react_experimental_.useState)(false);
    const [loadingSubproiecte, setLoadingSubproiecte] = (0,react_experimental_.useState)(false);
    const [subproiecte, setSubproiecte] = (0,react_experimental_.useState)([]);
    const [clientBD, setClientBD] = (0,react_experimental_.useState)(null);
    const [formData, setFormData] = (0,react_experimental_.useState)({
        // Date firmă (precompletate)
        numarFactura: "",
        dataFactura: new Date().toISOString().split("T")[0],
        // Date client (auto-completare din BD + ANAF)
        numeClient: proiect.Client || "",
        cuiClient: "",
        nrRegComClient: "",
        adresaClient: proiect.Adresa || "",
        emailClient: "",
        telefonClient: "",
        // Setări factură
        rataTVA: "19",
        observatii: ""
    });
    const [liniiFactura, setLiniiFactura] = (0,react_experimental_.useState)([
        {
            id: "1",
            descriere: proiect.Denumire || "",
            cantitate: 1,
            pretUnitarFaraTVA: proiect.Valoare_Estimata || 0,
            totalFaraTVA: proiect.Valoare_Estimata || 0
        }
    ]);
    // Încărcare subproiecte la deschiderea modalului
    (0,react_experimental_.useEffect)(()=>{
        loadSubproiecte();
        loadClientFromDB();
    }, [
        proiect.ID_Proiect
    ]);
    const loadSubproiecte = async ()=>{
        setLoadingSubproiecte(true);
        try {
            const response = await fetch(`/api/rapoarte/subproiecte?proiect_id=${encodeURIComponent(proiect.ID_Proiect)}`);
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            const result = await response.json();
            if (result.success) {
                setSubproiecte(result.subproiecte || []);
                console.log("Subproiecte \xeencărcate:", result.subproiecte);
            } else {
                console.warn("Nu s-au putut \xeencărca subproiectele:", result.error);
            }
        } catch (error) {
            console.error("Eroare la \xeencărcarea subproiectelor:", error);
        // Nu afișăm toast error pentru că subproiectele sunt opționale
        } finally{
            setLoadingSubproiecte(false);
        }
    };
    const loadClientFromDB = async ()=>{
        try {
            const response = await fetch(`/api/rapoarte/clienti?search=${encodeURIComponent(proiect.Client)}`);
            if (!response.ok) return;
            const result = await response.json();
            if (result.success && result.clienti && result.clienti.length > 0) {
                const client = result.clienti[0];
                setClientBD(client);
                // Auto-completare date client din BD
                setFormData((prev)=>({
                        ...prev,
                        cuiClient: client.cui || "",
                        nrRegComClient: client.nr_reg_com || "",
                        adresaClient: client.adresa || prev.adresaClient,
                        emailClient: client.email || "",
                        telefonClient: client.telefon || ""
                    }));
                dist/* toast */.Am.success("\uD83D\uDCCA Date client preluate din baza de date!", {
                    duration: 3000,
                    icon: "\uD83D\uDD17"
                });
            }
        } catch (error) {
            console.error("Eroare la căutarea clientului \xeen BD:", error);
        }
    };
    const handleInputChange = (e)=>{
        const { name, value } = e.target;
        setFormData((prev)=>({
                ...prev,
                [name]: value
            }));
    };
    const handleLinieChange = (id, field, value)=>{
        setLiniiFactura((prev)=>prev.map((linie)=>{
                if (linie.id === id) {
                    const updatedLinie = {
                        ...linie,
                        [field]: value
                    };
                    // Recalculare total pentru linia curentă
                    if (field === "cantitate" || field === "pretUnitarFaraTVA") {
                        updatedLinie.totalFaraTVA = Number(updatedLinie.cantitate) * Number(updatedLinie.pretUnitarFaraTVA);
                    }
                    return updatedLinie;
                }
                return linie;
            }));
    };
    const addLinie = ()=>{
        const newId = (liniiFactura.length + 1).toString();
        setLiniiFactura((prev)=>[
                ...prev,
                {
                    id: newId,
                    descriere: "",
                    cantitate: 1,
                    pretUnitarFaraTVA: 0,
                    totalFaraTVA: 0
                }
            ]);
    };
    const removeLinie = (id)=>{
        if (liniiFactura.length > 1) {
            setLiniiFactura((prev)=>prev.filter((linie)=>linie.id !== id));
        }
    };
    const addSubproiectToFactura = (subproiect)=>{
        const newId = `sub_${subproiect.ID_Subproiect}`;
        // Verificăm dacă subproiectul nu e deja adăugat
        const existingLinie = liniiFactura.find((linie)=>linie.id === newId);
        if (existingLinie) {
            dist/* toast */.Am.error("Subproiectul este deja adăugat \xeen factură!");
            return;
        }
        const newLinie = {
            id: newId,
            descriere: `Subproiect: ${subproiect.Denumire}`,
            cantitate: 1,
            pretUnitarFaraTVA: subproiect.Valoare_Estimata || 0,
            totalFaraTVA: subproiect.Valoare_Estimata || 0
        };
        setLiniiFactura((prev)=>[
                ...prev,
                newLinie
            ]);
        dist/* toast */.Am.success(`Subproiectul "${subproiect.Denumire}" a fost adăugat în factură!`);
    };
    const validateANAF = async ()=>{
        if (!formData.cuiClient) {
            dist/* toast */.Am.error("Introduceți CUI-ul pentru validare ANAF");
            return;
        }
        setLoadingANAF(true);
        try {
            const response = await fetch("/api/anaf/company-info", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    cui: formData.cuiClient
                })
            });
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            const result = await response.json();
            if (result.success && result.data) {
                const anafData = result.data;
                setFormData((prev)=>({
                        ...prev,
                        numeClient: anafData.denumire || prev.numeClient,
                        nrRegComClient: anafData.nrRegCom || prev.nrRegComClient,
                        adresaClient: anafData.adresa || prev.adresaClient
                    }));
                dist/* toast */.Am.success("✅ Date validate și completate din ANAF!");
            } else {
                dist/* toast */.Am.error("Nu s-au găsit date \xeen ANAF pentru acest CUI");
            }
        } catch (error) {
            console.error("Eroare ANAF:", error);
            dist/* toast */.Am.error("Eroare la validarea cu ANAF");
        } finally{
            setLoadingANAF(false);
        }
    };
    // Calculare totale
    const subtotal = liniiFactura.reduce((sum, linie)=>sum + Number(linie.totalFaraTVA), 0);
    const rataTVANumber = Number(formData.rataTVA);
    const totalTVA = subtotal * (rataTVANumber / 100);
    const total = subtotal + totalTVA;
    const generateInvoice = async ()=>{
        // Validări
        if (!formData.numarFactura.trim()) {
            dist/* toast */.Am.error("Numărul facturii este obligatoriu");
            return;
        }
        if (!formData.numeClient.trim() || !formData.cuiClient.trim()) {
            dist/* toast */.Am.error("Numele și CUI-ul clientului sunt obligatorii");
            return;
        }
        if (liniiFactura.some((linie)=>!linie.descriere.trim())) {
            dist/* toast */.Am.error("Toate liniile trebuie să aibă o descriere");
            return;
        }
        setLoading(true);
        try {
            const facturaData = {
                // Date proiect
                proiect: {
                    id: proiect.ID_Proiect,
                    denumire: proiect.Denumire,
                    client: proiect.Client
                },
                // Date factură
                numarFactura: formData.numarFactura,
                dataFactura: formData.dataFactura,
                // Date client
                client: {
                    nume: formData.numeClient,
                    cui: formData.cuiClient,
                    nrRegCom: formData.nrRegComClient,
                    adresa: formData.adresaClient,
                    email: formData.emailClient,
                    telefon: formData.telefonClient,
                    id: clientBD?.id || null
                },
                // Linii factură
                linii: liniiFactura,
                // Totale
                subtotal,
                rataTVA: rataTVANumber,
                totalTVA,
                total,
                // Observații
                observatii: formData.observatii
            };
            console.log("Generare factură cu datele:", facturaData);
            const response = await fetch("/api/actions/invoices/generate-hibrid", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(facturaData)
            });
            if (!response.ok) {
                const errorText = await response.text();
                throw new Error(`HTTP ${response.status}: ${errorText}`);
            }
            const blob = await response.blob();
            // Download PDF
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = `Factura_${formData.numarFactura.replace(/[^a-zA-Z0-9]/g, "_")}.pdf`;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
            dist/* toast */.Am.success("\uD83D\uDCC4 Factura PDF a fost generată și descărcată!");
            onSuccess();
        } catch (error) {
            console.error("Eroare la generarea facturii:", error);
            dist/* toast */.Am.error(`Eroare la generarea facturii: ${error instanceof Error ? error.message : "Eroare necunoscută"}`);
        } finally{
            setLoading(false);
        }
    };
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
            className: "bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[95vh] overflow-y-auto",
            children: [
                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                    className: "flex items-center justify-between p-6 border-b border-gray-200 bg-blue-50",
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("h2", {
                                    className: "text-xl font-semibold text-gray-900",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(file_text/* default */.Z, {
                                            className: "w-5 h-5 inline mr-2"
                                        }),
                                        "Generare Factură Hibridă"
                                    ]
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                    className: "text-sm text-gray-600 mt-1",
                                    children: [
                                        "Proiect: ",
                                        proiect.Denumire
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("button", {
                            onClick: onClose,
                            className: "text-gray-400 hover:text-gray-600 transition-colors",
                            children: /*#__PURE__*/ jsx_runtime_.jsx(x/* default */.Z, {
                                className: "w-6 h-6"
                            })
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                    className: "p-6 space-y-8",
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "bg-gray-50 p-4 rounded-lg",
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("h3", {
                                    className: "text-lg font-medium mb-4 text-gray-900",
                                    children: "\uD83D\uDCCB Date Factură"
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: "grid grid-cols-1 md:grid-cols-3 gap-4",
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: "Număr Factură *"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                    type: "text",
                                                    name: "numarFactura",
                                                    value: formData.numarFactura,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                                    placeholder: "ex: 2025-001",
                                                    required: true
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: "Data Factură *"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                    type: "date",
                                                    name: "dataFactura",
                                                    value: formData.dataFactura,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                                    required: true
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: "Rată TVA"
                                                }),
                                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("select", {
                                                    name: "rataTVA",
                                                    value: formData.rataTVA,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                                    children: [
                                                        /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                            value: "19",
                                                            children: "19%"
                                                        }),
                                                        /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                            value: "21",
                                                            children: "21%"
                                                        }),
                                                        /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                            value: "9",
                                                            children: "9%"
                                                        }),
                                                        /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                            value: "5",
                                                            children: "5%"
                                                        }),
                                                        /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                            value: "0",
                                                            children: "0%"
                                                        })
                                                    ]
                                                })
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "bg-blue-50 p-4 rounded-lg",
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: "flex items-center justify-between mb-4",
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("h3", {
                                            className: "text-lg font-medium text-gray-900",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(building_2/* default */.Z, {
                                                    className: "w-5 h-5 inline mr-2"
                                                }),
                                                "Date Client",
                                                clientBD && /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                                    className: "ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded",
                                                    children: "Din BD"
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                            onClick: validateANAF,
                                            disabled: loadingANAF || !formData.cuiClient,
                                            className: "px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(search/* default */.Z, {
                                                    className: "w-4 h-4"
                                                }),
                                                loadingANAF ? "Validez..." : "Validare ANAF"
                                            ]
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: "grid grid-cols-1 md:grid-cols-2 gap-4",
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: "Nume Client *"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                    type: "text",
                                                    name: "numeClient",
                                                    value: formData.numeClient,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                                    required: true
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: "CUI *"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                    type: "text",
                                                    name: "cuiClient",
                                                    value: formData.cuiClient,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                                    placeholder: "ex: RO12345678",
                                                    required: true
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: "Nr. Reg. Com."
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                    type: "text",
                                                    name: "nrRegComClient",
                                                    value: formData.nrRegComClient,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: [
                                                        /*#__PURE__*/ jsx_runtime_.jsx(map_pin/* default */.Z, {
                                                            className: "w-4 h-4 inline mr-1"
                                                        }),
                                                        "Adresă"
                                                    ]
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                    type: "text",
                                                    name: "adresaClient",
                                                    value: formData.adresaClient,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: "Email"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                    type: "email",
                                                    name: "emailClient",
                                                    value: formData.emailClient,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                                    children: "Telefon"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                    type: "tel",
                                                    name: "telefonClient",
                                                    value: formData.telefonClient,
                                                    onChange: handleInputChange,
                                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                })
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        subproiecte.length > 0 && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "bg-green-50 p-4 rounded-lg",
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: "flex items-center justify-between mb-4",
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("h3", {
                                            className: "text-lg font-medium text-gray-900",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(users/* default */.Z, {
                                                    className: "w-5 h-5 inline mr-2"
                                                }),
                                                "Subproiecte Disponibile"
                                            ]
                                        }),
                                        loadingSubproiecte && /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                            className: "text-sm text-gray-500",
                                            children: "Se \xeencarcă..."
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                    className: "grid grid-cols-1 md:grid-cols-2 gap-3",
                                    children: subproiecte.map((subproiect)=>{
                                        const isAdded = liniiFactura.some((linie)=>linie.id === `sub_${subproiect.ID_Subproiect}`);
                                        return /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                            className: `p-3 rounded-lg border-2 transition-all ${isAdded ? "border-green-300 bg-green-100" : "border-gray-200 bg-white hover:border-blue-300"}`,
                                            children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                className: "flex items-start justify-between",
                                                children: [
                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                        className: "flex-1",
                                                        children: [
                                                            /*#__PURE__*/ jsx_runtime_.jsx("h4", {
                                                                className: "font-medium text-sm text-gray-900 mb-1",
                                                                children: subproiect.Denumire
                                                            }),
                                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                                className: "text-xs text-gray-600 mb-2",
                                                                children: [
                                                                    "Valoare: ",
                                                                    subproiect.Valoare_Estimata?.toLocaleString("ro-RO"),
                                                                    " LEI"
                                                                ]
                                                            }),
                                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                                className: "text-xs text-gray-500",
                                                                children: [
                                                                    "Status: ",
                                                                    subproiect.Status
                                                                ]
                                                            })
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                                        onClick: ()=>addSubproiectToFactura(subproiect),
                                                        disabled: isAdded,
                                                        className: `ml-2 p-1 rounded transition-colors ${isAdded ? "text-green-600 cursor-not-allowed" : "text-blue-600 hover:bg-blue-100"}`,
                                                        title: isAdded ? "Deja adăugat" : "Adaugă \xeen factură",
                                                        children: /*#__PURE__*/ jsx_runtime_.jsx(plus/* default */.Z, {
                                                            className: "w-4 h-4"
                                                        })
                                                    })
                                                ]
                                            })
                                        }, subproiect.ID_Subproiect);
                                    })
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "bg-yellow-50 p-4 rounded-lg",
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: "flex items-center justify-between mb-4",
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("h3", {
                                            className: "text-lg font-medium text-gray-900",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(calculator/* default */.Z, {
                                                    className: "w-5 h-5 inline mr-2"
                                                }),
                                                "Linii Factură"
                                            ]
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                            onClick: addLinie,
                                            className: "px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors flex items-center gap-1",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(plus/* default */.Z, {
                                                    className: "w-4 h-4"
                                                }),
                                                "Adaugă Linie"
                                            ]
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                    className: "space-y-3",
                                    children: liniiFactura.map((linie, index)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            className: "grid grid-cols-12 gap-2 items-center bg-white p-3 rounded border",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: "col-span-5",
                                                    children: /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                        type: "text",
                                                        value: linie.descriere,
                                                        onChange: (e)=>handleLinieChange(linie.id, "descriere", e.target.value),
                                                        className: "w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent",
                                                        placeholder: "Descriere serviciu..."
                                                    })
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: "col-span-2",
                                                    children: /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                        type: "number",
                                                        value: linie.cantitate,
                                                        onChange: (e)=>handleLinieChange(linie.id, "cantitate", Number(e.target.value)),
                                                        className: "w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent",
                                                        min: "0",
                                                        step: "0.01"
                                                    })
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: "col-span-2",
                                                    children: /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                        type: "number",
                                                        value: linie.pretUnitarFaraTVA,
                                                        onChange: (e)=>handleLinieChange(linie.id, "pretUnitarFaraTVA", Number(e.target.value)),
                                                        className: "w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent",
                                                        min: "0",
                                                        step: "0.01"
                                                    })
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: "col-span-2",
                                                    children: /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                        type: "number",
                                                        value: linie.totalFaraTVA.toFixed(2),
                                                        readOnly: true,
                                                        className: "w-full px-2 py-1 text-sm border border-gray-200 rounded bg-gray-50"
                                                    })
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: "col-span-1",
                                                    children: liniiFactura.length > 1 && /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                                        onClick: ()=>removeLinie(linie.id),
                                                        className: "p-1 text-red-600 hover:bg-red-100 rounded transition-colors",
                                                        title: "Șterge linia",
                                                        children: /*#__PURE__*/ jsx_runtime_.jsx(x/* default */.Z, {
                                                            className: "w-4 h-4"
                                                        })
                                                    })
                                                })
                                            ]
                                        }, linie.id))
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: "grid grid-cols-12 gap-2 mt-2 text-xs font-medium text-gray-600",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                            className: "col-span-5",
                                            children: "Descriere"
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                            className: "col-span-2",
                                            children: "Cantitate"
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                            className: "col-span-2",
                                            children: "Preț Unit (fără TVA)"
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                            className: "col-span-2",
                                            children: "Total (fără TVA)"
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                            className: "col-span-1",
                                            children: "Acțiuni"
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            className: "bg-gray-100 p-4 rounded-lg",
                            children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: "grid grid-cols-2 md:grid-cols-4 gap-4 text-center",
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                className: "text-sm text-gray-600",
                                                children: "Subtotal (fără TVA)"
                                            }),
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                className: "text-lg font-semibold",
                                                children: [
                                                    subtotal.toLocaleString("ro-RO", {
                                                        minimumFractionDigits: 2
                                                    }),
                                                    " LEI"
                                                ]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                        children: [
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                className: "text-sm text-gray-600",
                                                children: [
                                                    "TVA (",
                                                    rataTVANumber,
                                                    "%)"
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                className: "text-lg font-semibold",
                                                children: [
                                                    totalTVA.toLocaleString("ro-RO", {
                                                        minimumFractionDigits: 2
                                                    }),
                                                    " LEI"
                                                ]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                className: "text-sm text-gray-600",
                                                children: "Total"
                                            }),
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                className: "text-xl font-bold text-blue-600",
                                                children: [
                                                    total.toLocaleString("ro-RO", {
                                                        minimumFractionDigits: 2
                                                    }),
                                                    " LEI"
                                                ]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                className: "text-sm text-gray-600",
                                                children: "Linii factură"
                                            }),
                                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                className: "text-lg font-semibold",
                                                children: liniiFactura.length
                                            })
                                        ]
                                    })
                                ]
                            })
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                    children: "Observații"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("textarea", {
                                    name: "observatii",
                                    value: formData.observatii,
                                    onChange: handleInputChange,
                                    rows: 3,
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",
                                    placeholder: "Observații suplimentare pentru factură..."
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "flex gap-3 pt-4 border-t",
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                    type: "button",
                                    onClick: onClose,
                                    className: "flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",
                                    disabled: loading,
                                    children: "Anulează"
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                    onClick: generateInvoice,
                                    className: "flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",
                                    disabled: loading,
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(file_text/* default */.Z, {
                                            className: "w-4 h-4"
                                        }),
                                        loading ? "Generez PDF..." : "Generează Factură PDF"
                                    ]
                                })
                            ]
                        })
                    ]
                })
            ]
        })
    });
}

// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/calendar.js
var calendar = __webpack_require__(517);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/user.js
var user = __webpack_require__(93680);
// EXTERNAL MODULE: ./node_modules/lucide-react/dist/esm/icons/dollar-sign.js
var dollar_sign = __webpack_require__(66908);
;// CONCATENATED MODULE: ./app/admin/rapoarte/proiecte/components/ProiectNouModal.tsx
// app/admin/rapoarte/proiecte/components/ProiectNouModal.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 








function ProiectNouModal({ isOpen, onClose, onSuccess, proiectParinte, isSubproiect = false }) {
    const [loading, setLoading] = (0,react_experimental_.useState)(false);
    const [formData, setFormData] = (0,react_experimental_.useState)({
        denumire: "",
        client: proiectParinte?.Client || "",
        status: "Planificat",
        valoareEstimata: "",
        dataStart: "",
        dataFinal: "",
        responsabil: "",
        adresa: proiectParinte?.Adresa || "",
        observatii: ""
    });
    const handleInputChange = (e)=>{
        const { name, value } = e.target;
        setFormData((prev)=>({
                ...prev,
                [name]: value
            }));
    };
    const validateForm = ()=>{
        const errors = [];
        if (!formData.denumire.trim()) {
            errors.push("Denumirea este obligatorie");
        }
        if (!formData.client.trim()) {
            errors.push("Clientul este obligatoriu");
        }
        if (!formData.dataStart) {
            errors.push("Data de start este obligatorie");
        }
        if (!formData.dataFinal) {
            errors.push("Data finală este obligatorie");
        }
        if (formData.dataStart && formData.dataFinal && new Date(formData.dataStart) > new Date(formData.dataFinal)) {
            errors.push("Data de start nu poate fi după data finală");
        }
        if (formData.valoareEstimata && isNaN(Number(formData.valoareEstimata))) {
            errors.push("Valoarea estimată trebuie să fie un număr valid");
        }
        return errors;
    };
    const handleSubmit = async (e)=>{
        e.preventDefault();
        const errors = validateForm();
        if (errors.length > 0) {
            dist/* toast */.Am.error(errors.join("\n"));
            return;
        }
        setLoading(true);
        try {
            // Pregătim datele pentru API - FIX PENTRU NULL VALUES
            const dataToSend = {
                denumire: formData.denumire.trim(),
                client: formData.client.trim(),
                status: formData.status,
                valoare_estimata: formData.valoareEstimata ? Number(formData.valoareEstimata) : 0,
                data_start: formData.dataStart,
                data_final: formData.dataFinal,
                responsabil: formData.responsabil.trim() || null,
                adresa: formData.adresa.trim() || null,
                observatii: formData.observatii.trim() || null,
                // Pentru subproiecte
                ...isSubproiect && proiectParinte && {
                    id_proiect_parinte: proiectParinte.ID_Proiect
                }
            };
            console.log("Trimitere date:", dataToSend);
            const endpoint = isSubproiect ? "/api/rapoarte/subproiecte" : "/api/rapoarte/proiecte";
            const response = await fetch(endpoint, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(dataToSend)
            });
            console.log("Response status:", response.status);
            if (!response.ok) {
                const errorText = await response.text();
                console.log("Response error text:", errorText);
                throw new Error(`Eroare HTTP ${response.status}: ${errorText}`);
            }
            const result = await response.json();
            console.log("Response data proiect:", result);
            if (result.success) {
                dist/* toast */.Am.success(`${isSubproiect ? "Subproiectul" : "Proiectul"} a fost adăugat cu succes!`);
                // Reset form
                setFormData({
                    denumire: "",
                    client: proiectParinte?.Client || "",
                    status: "Planificat",
                    valoareEstimata: "",
                    dataStart: "",
                    dataFinal: "",
                    responsabil: "",
                    adresa: proiectParinte?.Adresa || "",
                    observatii: ""
                });
                onSuccess();
            } else {
                throw new Error(result.error || `Eroare la adăugarea ${isSubproiect ? "subproiectului" : "proiectului"}`);
            }
        } catch (error) {
            console.error("Eroare la submit:", error);
            dist/* toast */.Am.error(`Eroare la adăugarea ${isSubproiect ? "subproiectului" : "proiectului"}: ${error instanceof Error ? error.message : "Eroare necunoscută"}`);
        } finally{
            setLoading(false);
        }
    };
    if (!isOpen) return null;
    return /*#__PURE__*/ jsx_runtime_.jsx("div", {
        className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
            className: "bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",
            children: [
                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                    className: "flex items-center justify-between p-6 border-b border-gray-200",
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx("h2", {
                            className: "text-xl font-semibold text-gray-900",
                            children: isSubproiect ? `Adaugă Subproiect pentru "${proiectParinte?.Denumire}"` : "Adaugă Proiect Nou"
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("button", {
                            onClick: onClose,
                            className: "text-gray-400 hover:text-gray-600 transition-colors",
                            children: /*#__PURE__*/ jsx_runtime_.jsx(x/* default */.Z, {
                                className: "w-6 h-6"
                            })
                        })
                    ]
                }),
                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("form", {
                    onSubmit: handleSubmit,
                    className: "p-6 space-y-6",
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(file_text/* default */.Z, {
                                            className: "w-4 h-4 inline mr-1"
                                        }),
                                        "Denumire ",
                                        isSubproiect ? "Subproiect" : "Proiect",
                                        " *"
                                    ]
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                    type: "text",
                                    name: "denumire",
                                    value: formData.denumire,
                                    onChange: handleInputChange,
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                    placeholder: `Introduceți denumirea ${isSubproiect ? "subproiectului" : "proiectului"}...`,
                                    required: true
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(user/* default */.Z, {
                                            className: "w-4 h-4 inline mr-1"
                                        }),
                                        "Client *"
                                    ]
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                    type: "text",
                                    name: "client",
                                    value: formData.client,
                                    onChange: handleInputChange,
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                    placeholder: "Introduceți numele clientului...",
                                    required: true
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                            className: "block text-sm font-medium text-gray-700 mb-2",
                                            children: "Status *"
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("select", {
                                            name: "status",
                                            value: formData.status,
                                            onChange: handleInputChange,
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                    value: "Planificat",
                                                    children: "Planificat"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                    value: "In progres",
                                                    children: "\xcen progres"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                    value: "Suspendat",
                                                    children: "Suspendat"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                    value: "Finalizat",
                                                    children: "Finalizat"
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("option", {
                                                    value: "Anulat",
                                                    children: "Anulat"
                                                })
                                            ]
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                            className: "block text-sm font-medium text-gray-700 mb-2",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(dollar_sign/* default */.Z, {
                                                    className: "w-4 h-4 inline mr-1"
                                                }),
                                                "Valoare Estimată (LEI)"
                                            ]
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                            type: "number",
                                            name: "valoareEstimata",
                                            value: formData.valoareEstimata,
                                            onChange: handleInputChange,
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                            placeholder: "0",
                                            min: "0",
                                            step: "0.01"
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "grid grid-cols-1 md:grid-cols-2 gap-4",
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                            className: "block text-sm font-medium text-gray-700 mb-2",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(calendar/* default */.Z, {
                                                    className: "w-4 h-4 inline mr-1"
                                                }),
                                                "Data Start *"
                                            ]
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                            type: "date",
                                            name: "dataStart",
                                            value: formData.dataStart,
                                            onChange: handleInputChange,
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                            required: true
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                            className: "block text-sm font-medium text-gray-700 mb-2",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx(calendar/* default */.Z, {
                                                    className: "w-4 h-4 inline mr-1"
                                                }),
                                                "Data Finală *"
                                            ]
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                            type: "date",
                                            name: "dataFinal",
                                            value: formData.dataFinal,
                                            onChange: handleInputChange,
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                            required: true
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(user/* default */.Z, {
                                            className: "w-4 h-4 inline mr-1"
                                        }),
                                        "Responsabil"
                                    ]
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                    type: "text",
                                    name: "responsabil",
                                    value: formData.responsabil,
                                    onChange: handleInputChange,
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                    placeholder: "Nume responsabil..."
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(map_pin/* default */.Z, {
                                            className: "w-4 h-4 inline mr-1"
                                        }),
                                        "Adresa ",
                                        isSubproiect ? "Subproiect" : "Proiect"
                                    ]
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                    type: "text",
                                    name: "adresa",
                                    value: formData.adresa,
                                    onChange: handleInputChange,
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                    placeholder: "Adresa unde se desfășoară lucrările..."
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                    children: "Observații"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("textarea", {
                                    name: "observatii",
                                    value: formData.observatii,
                                    onChange: handleInputChange,
                                    rows: 3,
                                    className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",
                                    placeholder: "Observații suplimentare..."
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "flex gap-3 pt-4",
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                    type: "button",
                                    onClick: onClose,
                                    className: "flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",
                                    disabled: loading,
                                    children: "Anulează"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                    type: "submit",
                                    className: "flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                                    disabled: loading,
                                    children: loading ? "Se adaugă..." : `Adaugă ${isSubproiect ? "Subproiect" : "Proiect"}`
                                })
                            ]
                        })
                    ]
                })
            ]
        })
    });
}

;// CONCATENATED MODULE: ./app/admin/rapoarte/proiecte/components/ProiectActions.tsx
// app/admin/rapoarte/proiecte/components/ProiectActions.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 











function ProiectActions({ proiect, onRefresh, isSubproiect = false }) {
    const [isOpen, setIsOpen] = (0,react_experimental_.useState)(false);
    const [isFacturaModalOpen, setIsFacturaModalOpen] = (0,react_experimental_.useState)(false);
    const [isSubproiectModalOpen, setIsSubproiectModalOpen] = (0,react_experimental_.useState)(false);
    const [dropdownPosition, setDropdownPosition] = (0,react_experimental_.useState)("bottom");
    const buttonRef = (0,react_experimental_.useRef)(null);
    const router = (0,navigation.useRouter)();
    // Calculează poziția dropdown-ului
    (0,react_experimental_.useEffect)(()=>{
        if (isOpen && buttonRef.current) {
            const rect = buttonRef.current.getBoundingClientRect();
            const spaceBelow = window.innerHeight - rect.bottom;
            const spaceAbove = rect.top;
            // Dacă nu avem suficient spațiu jos (< 200px), afișează sus
            if (spaceBelow < 200 && spaceAbove > 200) {
                setDropdownPosition("top");
            } else {
                setDropdownPosition("bottom");
            }
        }
    }, [
        isOpen
    ]);
    const handleVeziDetalii = ()=>{
        console.log("Detalii proiect:", proiect);
        // Formatează datele pentru afișare
        const formatDate = (dateObj)=>{
            try {
                return new Date(dateObj.value).toLocaleDateString("ro-RO");
            } catch  {
                return "N/A";
            }
        };
        const detalii = `
🏗️ DETALII PROIECT

📋 Denumire: ${proiect.Denumire}
🏢 Client: ${proiect.Client}
📊 Status: ${proiect.Status}
💰 Valoare Estimată: ${proiect.Valoare_Estimata?.toLocaleString("ro-RO")} LEI
📅 Data Start: ${formatDate(proiect.Data_Start)}
📅 Data Final: ${formatDate(proiect.Data_Final)}
👤 Responsabil: ${proiect.Responsabil || "Neatribuit"}
📍 Adresă: ${proiect.Adresa || "Nespecificată"}
📝 Observații: ${proiect.Observatii || "Fără observații"}
    `.trim();
        dist/* toast */.Am.success(detalii, {
            duration: 8000,
            style: {
                background: "#f8fafc",
                color: "#1e293b",
                border: "1px solid #e2e8f0",
                borderRadius: "8px",
                fontSize: "12px",
                whiteSpace: "pre-line",
                maxWidth: "500px",
                padding: "16px"
            }
        });
        setIsOpen(false);
    };
    const handleEditeaza = ()=>{
        console.log("Date pentru editare:", proiect);
        try {
            // Creează URL-ul pentru editare
            const editUrl = `/admin/rapoarte/proiecte/${encodeURIComponent(proiect.ID_Proiect)}/edit`;
            console.log("Ar trebui să redirectionez la:", editUrl);
            // Pentru moment, afișăm un modal de confirmare
            const confirmare = confirm(`Vrei să editezi proiectul "${proiect.Denumire}"?\n\nNOTĂ: Funcția de editare va fi implementată în următoarea versiune.`);
            if (confirmare) {
                // Aici va fi implementată logica de editare
                dist/* toast */.Am.success("Funcția de editare va fi disponibilă \xeen cur\xe2nd!", {
                    duration: 3000,
                    icon: "⚡"
                });
            }
        } catch (error) {
            console.error("Eroare la editare:", error);
            dist/* toast */.Am.error("Eroare la \xeencărcarea editorului");
        }
        setIsOpen(false);
    };
    const handleGenerareFactura = ()=>{
        console.log("Generare factură pentru:", proiect);
        setIsFacturaModalOpen(true);
        setIsOpen(false);
    };
    const handleAdaugaSubproiect = ()=>{
        console.log("Adaugă subproiect pentru:", proiect);
        setIsSubproiectModalOpen(true);
        setIsOpen(false);
    };
    const handleSterge = async ()=>{
        const confirmare = confirm(`Ești sigur că vrei să ștergi ${isSubproiect ? "subproiectul" : "proiectul"}: "${proiect.Denumire}"?`);
        if (!confirmare) return;
        try {
            const endpoint = isSubproiect ? "/api/rapoarte/subproiecte" : "/api/rapoarte/proiecte";
            const response = await fetch(endpoint, {
                method: "DELETE",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    id: proiect.ID_Proiect
                })
            });
            if (!response.ok) {
                throw new Error(`Eroare HTTP: ${response.status}`);
            }
            const result = await response.json();
            if (result.success) {
                dist/* toast */.Am.success(`${isSubproiect ? "Subproiectul" : "Proiectul"} a fost șters cu succes!`);
                onRefresh();
            } else {
                throw new Error(result.error || "Eroare la ștergere");
            }
        } catch (error) {
            console.error("Eroare la ștergere:", error);
            dist/* toast */.Am.error(`Eroare la ștergerea ${isSubproiect ? "subproiectului" : "proiectului"}`);
        }
        setIsOpen(false);
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "relative",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("button", {
                        ref: buttonRef,
                        onClick: ()=>setIsOpen(!isOpen),
                        className: "p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",
                        title: "Acțiuni",
                        children: /*#__PURE__*/ jsx_runtime_.jsx(ellipsis_vertical/* default */.Z, {
                            className: "w-4 h-4"
                        })
                    }),
                    isOpen && /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                className: "fixed inset-0 z-10",
                                onClick: ()=>setIsOpen(false)
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: `absolute right-0 z-20 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 ${dropdownPosition === "top" ? "bottom-full mb-2" : "top-full mt-2"}`,
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                        onClick: handleVeziDetalii,
                                        className: "w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx(eye/* default */.Z, {
                                                className: "w-4 h-4"
                                            }),
                                            "Vezi Detalii"
                                        ]
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                        onClick: handleEditeaza,
                                        className: "w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx(pen/* default */.Z, {
                                                className: "w-4 h-4"
                                            }),
                                            "Editează"
                                        ]
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("hr", {
                                        className: "my-1"
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                        onClick: handleGenerareFactura,
                                        className: "w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx(file_text/* default */.Z, {
                                                className: "w-4 h-4"
                                            }),
                                            "Generare Factură"
                                        ]
                                    }),
                                    !isSubproiect && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                        onClick: handleAdaugaSubproiect,
                                        className: "w-full px-4 py-2 text-left text-sm text-blue-700 hover:bg-blue-50 flex items-center gap-2",
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx(plus/* default */.Z, {
                                                className: "w-4 h-4"
                                            }),
                                            "Adaugă Subproiect"
                                        ]
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("hr", {
                                        className: "my-1"
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                        onClick: handleSterge,
                                        className: "w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",
                                        children: [
                                            /*#__PURE__*/ jsx_runtime_.jsx(trash_2/* default */.Z, {
                                                className: "w-4 h-4"
                                            }),
                                            "Șterge ",
                                            isSubproiect ? "Subproiect" : "Proiect"
                                        ]
                                    })
                                ]
                            })
                        ]
                    })
                ]
            }),
            isFacturaModalOpen && /*#__PURE__*/ jsx_runtime_.jsx(FacturaHibridModal, {
                proiect: proiect,
                onClose: ()=>setIsFacturaModalOpen(false),
                onSuccess: ()=>{
                    setIsFacturaModalOpen(false);
                    onRefresh();
                }
            }),
            isSubproiectModalOpen && /*#__PURE__*/ jsx_runtime_.jsx(ProiectNouModal, {
                isOpen: isSubproiectModalOpen,
                onClose: ()=>setIsSubproiectModalOpen(false),
                onSuccess: ()=>{
                    setIsSubproiectModalOpen(false);
                    onRefresh();
                },
                proiectParinte: proiect,
                isSubproiect: true
            })
        ]
    });
}

// EXTERNAL MODULE: ./node_modules/xlsx/xlsx.js
var xlsx = __webpack_require__(30259);
;// CONCATENATED MODULE: ./app/admin/rapoarte/proiecte/components/ProiecteTable.tsx
// app/admin/rapoarte/proiecte/components/ProiecteTable.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 











function ProiecteTable({ searchParams }) {
    const [loading, setLoading] = (0,react_experimental_.useState)(true);
    const [proiecte, setProiecte] = (0,react_experimental_.useState)([]);
    const [subproiecte, setSubproiecte] = (0,react_experimental_.useState)([]);
    const [expandedProjects, setExpandedProjects] = (0,react_experimental_.useState)(new Set());
    const [loadingRefresh, setLoadingRefresh] = (0,react_experimental_.useState)(false);
    // Extrage valorile din searchParams
    const searchTerm = searchParams?.search || "";
    const statusFilter = searchParams?.status || "";
    const clientFilter = searchParams?.client || "";
    (0,react_experimental_.useEffect)(()=>{
        loadData();
    }, [
        searchTerm,
        statusFilter,
        clientFilter
    ]);
    const loadData = async ()=>{
        setLoading(true);
        try {
            await Promise.all([
                loadProiecte(),
                loadSubproiecte()
            ]);
        } catch (error) {
            console.error("Eroare la \xeencărcarea datelor:", error);
            dist/* toast */.Am.error("Eroare la \xeencărcarea datelor");
        } finally{
            setLoading(false);
        }
    };
    const loadProiecte = async ()=>{
        try {
            const params = new URLSearchParams();
            if (searchTerm) params.append("search", searchTerm);
            const response = await fetch(`/api/rapoarte/proiecte?${params}`);
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            const result = await response.json();
            if (result.success) {
                setProiecte(result.proiecte || []);
            } else {
                throw new Error(result.error || "Eroare la \xeencărcarea proiectelor");
            }
        } catch (error) {
            console.error("Eroare la \xeencărcarea proiectelor:", error);
            throw error;
        }
    };
    const loadSubproiecte = async ()=>{
        try {
            const params = new URLSearchParams();
            if (searchTerm) params.append("search", searchTerm);
            const response = await fetch(`/api/rapoarte/subproiecte?${params}`);
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            const result = await response.json();
            if (result.success) {
                setSubproiecte(result.subproiecte || []);
            } else {
                console.warn("Eroare la \xeencărcarea subproiectelor:", result.error);
                setSubproiecte([]);
            }
        } catch (error) {
            console.error("Eroare la \xeencărcarea subproiectelor:", error);
            setSubproiecte([]);
        }
    };
    const handleRefresh = async ()=>{
        setLoadingRefresh(true);
        try {
            await loadData();
            dist/* toast */.Am.success("Date actualizate!");
        } catch (error) {
            console.error("Eroare la refresh:", error);
            dist/* toast */.Am.error("Eroare la actualizarea datelor");
        } finally{
            setLoadingRefresh(false);
        }
    };
    const toggleProjectExpansion = (proiectId)=>{
        setExpandedProjects((prev)=>{
            const newSet = new Set(prev);
            if (newSet.has(proiectId)) {
                newSet.delete(proiectId);
            } else {
                newSet.add(proiectId);
            }
            return newSet;
        });
    };
    const getSubproiecteForProject = (proiectId)=>{
        return subproiecte.filter((sub)=>sub.ID_Proiect === proiectId);
    };
    const formatDate = (dateObj)=>{
        try {
            return new Date(dateObj.value).toLocaleDateString("ro-RO");
        } catch  {
            return "N/A";
        }
    };
    const formatCurrency = (amount)=>{
        return amount?.toLocaleString("ro-RO", {
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }) + " LEI";
    };
    const getStatusBadge = (status)=>{
        const statusConfig = {
            "Planificat": "bg-blue-100 text-blue-800",
            "In progres": "bg-yellow-100 text-yellow-800",
            "Suspendat": "bg-red-100 text-red-800",
            "Finalizat": "bg-green-100 text-green-800",
            "Anulat": "bg-gray-100 text-gray-800"
        };
        return /*#__PURE__*/ jsx_runtime_.jsx("span", {
            className: `px-2 py-1 text-xs font-medium rounded-full ${statusConfig[status] || "bg-gray-100 text-gray-800"}`,
            children: status
        });
    };
    // Filtrare proiecte
    const filteredProiecte = proiecte.filter((proiect)=>{
        if (statusFilter && proiect.Status !== statusFilter) return false;
        if (clientFilter && !proiect.Client.toLowerCase().includes(clientFilter.toLowerCase())) return false;
        return true;
    });
    const exportToExcel = ()=>{
        try {
            const exportData = [];
            filteredProiecte.forEach((proiect)=>{
                // Adaugă proiectul principal
                exportData.push({
                    "Tip": "Proiect",
                    "ID": proiect.ID_Proiect,
                    "Denumire": proiect.Denumire,
                    "Client": proiect.Client,
                    "Status": proiect.Status,
                    "Valoare Estimată (LEI)": proiect.Valoare_Estimata || 0,
                    "Data Start": formatDate(proiect.Data_Start),
                    "Data Final": formatDate(proiect.Data_Final),
                    "Responsabil": proiect.Responsabil || "Neatribuit",
                    "Adresă": proiect.Adresa || "Nespecificată"
                });
                // Adaugă subproiectele
                const subproiecteProiect = getSubproiecteForProject(proiect.ID_Proiect);
                subproiecteProiect.forEach((subproiect)=>{
                    exportData.push({
                        "Tip": "Subproiect",
                        "ID": subproiect.ID_Subproiect,
                        "Denumire": `  → ${subproiect.Denumire}`,
                        "Client": subproiect.Client,
                        "Status": subproiect.Status,
                        "Valoare Estimată (LEI)": subproiect.Valoare_Estimata || 0,
                        "Data Start": formatDate(subproiect.Data_Start),
                        "Data Final": formatDate(subproiect.Data_Final),
                        "Responsabil": subproiect.Responsabil || "Neatribuit",
                        "Adresă": subproiect.Adresa || "Nespecificată"
                    });
                });
            });
            const wb = xlsx.utils.book_new();
            const ws = xlsx.utils.json_to_sheet(exportData);
            // Setare lățimi coloane
            const colWidths = [
                {
                    wch: 12
                },
                {
                    wch: 25
                },
                {
                    wch: 40
                },
                {
                    wch: 20
                },
                {
                    wch: 12
                },
                {
                    wch: 15
                },
                {
                    wch: 12
                },
                {
                    wch: 12
                },
                {
                    wch: 15
                },
                {
                    wch: 30
                } // Adresă
            ];
            ws["!cols"] = colWidths;
            xlsx.utils.book_append_sheet(wb, ws, "Proiecte & Subproiecte");
            const filename = `Proiecte_${new Date().toISOString().slice(0, 10)}.xlsx`;
            xlsx.writeFile(wb, filename);
            dist/* toast */.Am.success("\uD83D\uDCCA Export Excel realizat cu succes!");
        } catch (error) {
            console.error("Eroare la export:", error);
            dist/* toast */.Am.error("Eroare la exportul Excel");
        }
    };
    if (loading) {
        return /*#__PURE__*/ jsx_runtime_.jsx("div", {
            className: "bg-white rounded-lg shadow-sm border border-gray-200 p-8",
            children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "text-center",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("p", {
                        className: "text-gray-600",
                        children: "Se \xeencarcă proiectele..."
                    })
                ]
            })
        });
    }
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: "bg-white rounded-lg shadow-sm border border-gray-200",
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "px-6 py-4 border-b border-gray-200 bg-gray-50",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                    className: "flex items-center justify-between",
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "flex items-center gap-4",
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("h3", {
                                    className: "text-lg font-medium text-gray-900",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(building_2/* default */.Z, {
                                            className: "w-5 h-5 inline mr-2"
                                        }),
                                        "Proiecte & Subproiecte"
                                    ]
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: "flex items-center gap-2 text-sm text-gray-600",
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("span", {
                                            children: [
                                                filteredProiecte.length,
                                                " proiecte"
                                            ]
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                            children: "•"
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("span", {
                                            children: [
                                                subproiecte.length,
                                                " subproiecte"
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            className: "flex items-center gap-2",
                            children: [
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                    onClick: handleRefresh,
                                    disabled: loadingRefresh,
                                    className: "px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-1",
                                    title: "Actualizează datele",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(refresh_cw/* default */.Z, {
                                            className: `w-4 h-4 ${loadingRefresh ? "animate-spin" : ""}`
                                        }),
                                        "Actualizează"
                                    ]
                                }),
                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                    onClick: exportToExcel,
                                    className: "px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-1",
                                    title: "Export Excel",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(download/* default */.Z, {
                                            className: "w-4 h-4"
                                        }),
                                        "Export Excel"
                                    ]
                                })
                            ]
                        })
                    ]
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "overflow-x-auto",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("table", {
                    className: "w-full",
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx("thead", {
                            className: "bg-gray-50 border-b border-gray-200",
                            children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("tr", {
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("th", {
                                        className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                        children: "Proiect / Subproiect"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("th", {
                                        className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                        children: "Client"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("th", {
                                        className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                        children: "Status"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("th", {
                                        className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                        children: "Valoare Estimată"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("th", {
                                        className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                        children: "Perioada"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("th", {
                                        className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                        children: "Responsabil"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("th", {
                                        className: "px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",
                                        children: "Acțiuni"
                                    })
                                ]
                            })
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("tbody", {
                            className: "bg-white divide-y divide-gray-200",
                            children: filteredProiecte.length === 0 ? /*#__PURE__*/ jsx_runtime_.jsx("tr", {
                                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("td", {
                                    colSpan: 7,
                                    className: "px-6 py-8 text-center text-gray-500",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(search/* default */.Z, {
                                            className: "w-8 h-8 mx-auto mb-2 text-gray-400"
                                        }),
                                        "Nu s-au găsit proiecte care să corespundă filtrelor aplicaţe."
                                    ]
                                })
                            }) : filteredProiecte.map((proiect)=>{
                                const subproiecteProiect = getSubproiecteForProject(proiect.ID_Proiect);
                                const isExpanded = expandedProjects.has(proiect.ID_Proiect);
                                const hasSubprojects = subproiecteProiect.length > 0;
                                return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                                    children: [
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("tr", {
                                            className: "hover:bg-gray-50 transition-colors",
                                            children: [
                                                /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                    className: "px-6 py-4",
                                                    children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                        className: "flex items-center",
                                                        children: [
                                                            hasSubprojects && /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                                                onClick: ()=>toggleProjectExpansion(proiect.ID_Proiect),
                                                                className: "mr-2 p-1 rounded hover:bg-gray-200 transition-colors",
                                                                children: isExpanded ? /*#__PURE__*/ jsx_runtime_.jsx(chevron_down/* default */.Z, {
                                                                    className: "w-4 h-4 text-gray-600"
                                                                }) : /*#__PURE__*/ jsx_runtime_.jsx(chevron_right/* default */.Z, {
                                                                    className: "w-4 h-4 text-gray-600"
                                                                })
                                                            }),
                                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                                className: "flex-1",
                                                                children: [
                                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                                        className: "flex items-center gap-2",
                                                                        children: [
                                                                            /*#__PURE__*/ jsx_runtime_.jsx(building_2/* default */.Z, {
                                                                                className: "w-4 h-4 text-blue-600"
                                                                            }),
                                                                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                                                className: "text-sm font-medium text-gray-900",
                                                                                children: proiect.Denumire
                                                                            })
                                                                        ]
                                                                    }),
                                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                                        className: "text-xs text-gray-500 mt-1",
                                                                        children: [
                                                                            "ID: ",
                                                                            proiect.ID_Proiect
                                                                        ]
                                                                    }),
                                                                    hasSubprojects && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                                        className: "text-xs text-blue-600 mt-1",
                                                                        children: [
                                                                            subproiecteProiect.length,
                                                                            " subproiect",
                                                                            subproiecteProiect.length !== 1 ? "e" : ""
                                                                        ]
                                                                    })
                                                                ]
                                                            })
                                                        ]
                                                    })
                                                }),
                                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("td", {
                                                    className: "px-6 py-4",
                                                    children: [
                                                        /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                            className: "text-sm text-gray-900",
                                                            children: proiect.Client
                                                        }),
                                                        proiect.Adresa && /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                            className: "text-xs text-gray-500 mt-1",
                                                            children: proiect.Adresa
                                                        })
                                                    ]
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                    className: "px-6 py-4",
                                                    children: getStatusBadge(proiect.Status)
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                    className: "px-6 py-4",
                                                    children: /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                        className: "text-sm font-medium text-gray-900",
                                                        children: formatCurrency(proiect.Valoare_Estimata || 0)
                                                    })
                                                }),
                                                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("td", {
                                                    className: "px-6 py-4",
                                                    children: [
                                                        /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                            className: "text-sm text-gray-900",
                                                            children: formatDate(proiect.Data_Start)
                                                        }),
                                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                            className: "text-xs text-gray-500",
                                                            children: [
                                                                "→ ",
                                                                formatDate(proiect.Data_Final)
                                                            ]
                                                        })
                                                    ]
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                    className: "px-6 py-4",
                                                    children: /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                        className: "text-sm text-gray-900",
                                                        children: proiect.Responsabil || "Neatribuit"
                                                    })
                                                }),
                                                /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                    className: "px-6 py-4 text-right",
                                                    children: /*#__PURE__*/ jsx_runtime_.jsx(ProiectActions, {
                                                        proiect: proiect,
                                                        onRefresh: loadData,
                                                        isSubproiect: false
                                                    })
                                                })
                                            ]
                                        }, proiect.ID_Proiect),
                                        isExpanded && subproiecteProiect.map((subproiect)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("tr", {
                                                className: "bg-blue-25 hover:bg-blue-50 transition-colors border-l-4 border-blue-200",
                                                children: [
                                                    /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                        className: "px-6 py-3",
                                                        children: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                            className: "flex items-center ml-8",
                                                            children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                                className: "flex-1",
                                                                children: [
                                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                                        className: "flex items-center gap-2",
                                                                        children: [
                                                                            /*#__PURE__*/ jsx_runtime_.jsx(users/* default */.Z, {
                                                                                className: "w-3 h-3 text-blue-500"
                                                                            }),
                                                                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                                                className: "text-sm text-gray-800",
                                                                                children: subproiect.Denumire
                                                                            })
                                                                        ]
                                                                    }),
                                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                                        className: "text-xs text-gray-500 mt-1",
                                                                        children: [
                                                                            "ID: ",
                                                                            subproiect.ID_Subproiect
                                                                        ]
                                                                    })
                                                                ]
                                                            })
                                                        })
                                                    }),
                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("td", {
                                                        className: "px-6 py-3",
                                                        children: [
                                                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                                className: "text-sm text-gray-700",
                                                                children: subproiect.Client
                                                            }),
                                                            subproiect.Adresa && /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                                className: "text-xs text-gray-500 mt-1",
                                                                children: subproiect.Adresa
                                                            })
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                        className: "px-6 py-3",
                                                        children: getStatusBadge(subproiect.Status)
                                                    }),
                                                    /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                        className: "px-6 py-3",
                                                        children: /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                            className: "text-sm font-medium text-gray-800",
                                                            children: formatCurrency(subproiect.Valoare_Estimata || 0)
                                                        })
                                                    }),
                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("td", {
                                                        className: "px-6 py-3",
                                                        children: [
                                                            /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                                className: "text-sm text-gray-800",
                                                                children: formatDate(subproiect.Data_Start)
                                                            }),
                                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                                className: "text-xs text-gray-500",
                                                                children: [
                                                                    "→ ",
                                                                    formatDate(subproiect.Data_Final)
                                                                ]
                                                            })
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                        className: "px-6 py-3",
                                                        children: /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                                            className: "text-sm text-gray-800",
                                                            children: subproiect.Responsabil || "Neatribuit"
                                                        })
                                                    }),
                                                    /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                                        className: "px-6 py-3 text-right",
                                                        children: /*#__PURE__*/ jsx_runtime_.jsx(ProiectActions, {
                                                            proiect: {
                                                                ID_Proiect: subproiect.ID_Subproiect,
                                                                Denumire: subproiect.Denumire,
                                                                Client: subproiect.Client,
                                                                Status: subproiect.Status,
                                                                Valoare_Estimata: subproiect.Valoare_Estimata,
                                                                Data_Start: subproiect.Data_Start,
                                                                Data_Final: subproiect.Data_Final,
                                                                Responsabil: subproiect.Responsabil,
                                                                Adresa: subproiect.Adresa,
                                                                Observatii: subproiect.Observatii
                                                            },
                                                            onRefresh: loadData,
                                                            isSubproiect: true
                                                        })
                                                    })
                                                ]
                                            }, subproiect.ID_Subproiect))
                                    ]
                                });
                            })
                        })
                    ]
                })
            }),
            filteredProiecte.length > 0 && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "px-6 py-4 border-t border-gray-200 bg-gray-50",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                    className: "grid grid-cols-2 md:grid-cols-4 gap-4 text-center",
                    children: [
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                    className: "text-sm text-gray-600",
                                    children: "Total Proiecte"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                    className: "text-lg font-semibold text-gray-900",
                                    children: filteredProiecte.length
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                    className: "text-sm text-gray-600",
                                    children: "Total Subproiecte"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                    className: "text-lg font-semibold text-blue-600",
                                    children: subproiecte.length
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                    className: "text-sm text-gray-600",
                                    children: "Valoare Totală Proiecte"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                    className: "text-lg font-semibold text-green-600",
                                    children: formatCurrency(filteredProiecte.reduce((sum, p)=>sum + (p.Valoare_Estimata || 0), 0))
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                    className: "text-sm text-gray-600",
                                    children: "Valoare Totală Subproiecte"
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                    className: "text-lg font-semibold text-purple-600",
                                    children: formatCurrency(subproiecte.reduce((sum, s)=>sum + (s.Valoare_Estimata || 0), 0))
                                })
                            ]
                        })
                    ]
                })
            })
        ]
    });
}

;// CONCATENATED MODULE: ./app/admin/rapoarte/proiecte/page.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 




function ProiectePage() {
    const router = (0,navigation.useRouter)();
    const searchParams = (0,navigation.useSearchParams)();
    // Inițializează filtrele din URL
    const [filters, setFilters] = (0,react_experimental_.useState)({
        search: searchParams?.get("search") || "",
        status: searchParams?.get("status") || "",
        client: searchParams?.get("client") || "",
        data_start_start: searchParams?.get("data_start_start") || "",
        data_start_end: searchParams?.get("data_start_end") || "",
        valoare_min: searchParams?.get("valoare_min") || "",
        valoare_max: searchParams?.get("valoare_max") || ""
    });
    // Convertește filtrele în searchParams pentru ProiecteTable
    const tableSearchParams = Object.fromEntries(Object.entries(filters).filter(([_, value])=>value !== ""));
    const handleFilterChange = (newFilters)=>{
        setFilters(newFilters);
        // Actualizează URL-ul cu noile filtre
        const params = new URLSearchParams();
        Object.entries(newFilters).forEach(([key, value])=>{
            if (value) {
                params.set(key, value);
            }
        });
        const newUrl = params.toString() ? `/admin/rapoarte/proiecte?${params.toString()}` : "/admin/rapoarte/proiecte";
        router.push(newUrl);
    };
    const handleFilterReset = ()=>{
        const emptyFilters = {
            search: "",
            status: "",
            client: "",
            data_start_start: "",
            data_start_end: "",
            valoare_min: "",
            valoare_max: ""
        };
        setFilters(emptyFilters);
        router.push("/admin/rapoarte/proiecte");
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        style: {
            padding: "1.5rem"
        },
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                style: {
                    marginBottom: "2rem",
                    borderBottom: "2px solid #e9ecef",
                    paddingBottom: "1rem"
                },
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("h1", {
                        style: {
                            margin: 0,
                            color: "#2c3e50",
                            fontSize: "2rem",
                            fontWeight: "bold"
                        },
                        children: "\uD83D\uDCCB Management Proiecte"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("p", {
                        style: {
                            margin: "0.5rem 0 0 0",
                            color: "#7f8c8d",
                            fontSize: "1.1rem"
                        },
                        children: "Gestionează și monitorizează toate proiectele din portofoliu"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                style: {
                    marginBottom: "1.5rem",
                    background: "white",
                    border: "1px solid #dee2e6",
                    borderRadius: "8px",
                    padding: "1.5rem",
                    boxShadow: "0 2px 4px rgba(0,0,0,0.1)"
                },
                children: /*#__PURE__*/ jsx_runtime_.jsx(react_experimental_.Suspense, {
                    fallback: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        style: {
                            padding: "2rem",
                            textAlign: "center",
                            color: "#7f8c8d"
                        },
                        children: "⏳ Se \xeencarcă filtrele..."
                    }),
                    children: /*#__PURE__*/ jsx_runtime_.jsx(ProiectFilters, {
                        values: filters,
                        onChange: handleFilterChange,
                        onReset: handleFilterReset
                    })
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                style: {
                    background: "white",
                    border: "1px solid #dee2e6",
                    borderRadius: "8px",
                    overflow: "hidden",
                    boxShadow: "0 2px 4px rgba(0,0,0,0.1)"
                },
                children: /*#__PURE__*/ jsx_runtime_.jsx(react_experimental_.Suspense, {
                    fallback: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        style: {
                            padding: "3rem",
                            textAlign: "center",
                            color: "#7f8c8d"
                        },
                        children: "⏳ Se \xeencarcă proiectele..."
                    }),
                    children: /*#__PURE__*/ jsx_runtime_.jsx(ProiecteTable, {
                        searchParams: tableSearchParams
                    })
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                style: {
                    marginTop: "2rem",
                    padding: "1rem",
                    background: "#f8f9fa",
                    borderRadius: "6px",
                    border: "1px solid #e9ecef"
                },
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                    style: {
                        margin: 0,
                        fontSize: "14px",
                        color: "#6c757d",
                        textAlign: "center"
                    },
                    children: [
                        "\uD83D\uDCA1 ",
                        /*#__PURE__*/ jsx_runtime_.jsx("strong", {
                            children: "Tip:"
                        }),
                        ' Folosește filtrele pentru a găsi rapid proiectele dorite. Click pe "Acțiuni" pentru a gestiona fiecare proiect individual.'
                    ]
                })
            })
        ]
    });
}


/***/ }),

/***/ 84309:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(61363);

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/home/teodor/PM1-2025-07-17/unitar-admin/app/admin/rapoarte/proiecte/page.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [8478,8448,7843,2322,2712,8313,9850,6166,6549], () => (__webpack_exec__(224)));
module.exports = __webpack_exports__;

})();