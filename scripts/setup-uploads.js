// ==================================================================
// CALEA: scripts/setup-uploads.js
// DESCRIERE: Script pentru crearea automatÄƒ a directoarelor de upload
// ==================================================================

const fs = require('fs');
const path = require('path');

console.log('ğŸš€ Setting up UNITAR PROIECT directories...');

// Directoarele necesare
const directories = [
  'uploads',
  'uploads/facturi',
  'uploads/contracte',
  'uploads/temp'
];

// CreeazÄƒ directoarele
directories.forEach(dir => {
  const fullPath = path.join(process.cwd(), dir);
  
  try {
    if (!fs.existsSync(fullPath)) {
      fs.mkdirSync(fullPath, { recursive: true });
      console.log(`âœ… Created directory: ${dir}`);
    } else {
      console.log(`ğŸ“ Directory exists: ${dir}`);
    }
  } catch (error) {
    console.error(`âŒ Error creating directory ${dir}:`, error.message);
  }
});

// CreeazÄƒ .gitkeep pentru a menÈ›ine directoarele Ã®n git
const gitkeepDirs = ['uploads/facturi', 'uploads/contracte', 'uploads/temp'];

gitkeepDirs.forEach(dir => {
  const gitkeepPath = path.join(process.cwd(), dir, '.gitkeep');
  
  try {
    if (!fs.existsSync(gitkeepPath)) {
      fs.writeFileSync(gitkeepPath, '# Keep this directory in git\n# Generated by UNITAR PROIECT setup\n');
      console.log(`âœ… Created .gitkeep: ${dir}`);
    }
  } catch (error) {
    console.error(`âŒ Error creating .gitkeep in ${dir}:`, error.message);
  }
});

// VerificÄƒ cÄƒ Puppeteer poate rula
try {
  const puppeteer = require('puppeteer');
  console.log(`âœ… Puppeteer version: ${puppeteer._launcher.product} ready`);
} catch (error) {
  console.log('âš ï¸  Puppeteer not loaded yet (will be available after install)');
}

console.log('\nğŸ‰ UNITAR PROIECT setup complete!');
console.log('ğŸ“„ Ready to generate PDF invoices with hybrid system');
console.log('ğŸ”— ANAF integration available for company data');
